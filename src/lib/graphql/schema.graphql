schema {
  query: Query
  mutation: Mutations
}

type AuthMutation {
  changePassword(newPassword: String!, oldPassword: String!): String!
  refreshSession: RefreshSessionResponse!
  revokeSession(token: String!): RevokeSessionResponse!
  signInEmail(payload: SignInEmailInput!): SignInResponse!
  signUpEmail(payload: SignUpEmailInput!): SignUpResponse!
}

type AuthQuery {
  me: AuthUser!
  user(id: UUID!): AuthUser
  users(limit: Int!, page: Int!): [AuthUser!]!
}

type AuthUser {
  banExpires: DateTime
  banReason: String
  banned: Boolean
  createdAt: DateTime!
  email: String!
  emailVerified: Boolean
  id: UUID!
  image: String
  name: String!
  role: AuthUserRole
  updatedAt: DateTime!
}

enum AuthUserRole {
  ACCOUNTANT
  ACCOUNT_MANAGER
  ADMIN
  CARRIER
  CLIENT
  CLIENT_ADMIN
  CUSTOMER_SUPPORT_AGENT
  DEVELOPER
  DISPATCHER
  DRIVER
  END_CUSTOMER
  FINANCE_MANAGER
  FLEET_MANAGER
  INVENTORY_MANAGER
  LOGISTICS_COORDINATOR
  LOGISTICS_MANAGER
  LOGISTICS_PLANNER
  MARKETING_MANAGER
  PACKER
  PICKER
  PRICING_ANALYST
  PRODUCT_MANAGER
  QC_MANAGER
  RECEIVING_MANAGER
  RETURNS_PROCESSOR
  SALES_MANAGER
  SALES_REP
  SDR
  TRANSPORT_MANAGER
  USER
  WAREHOUSE_MANAGER
  WAREHOUSE_OPERATOR
}

enum CasePriority {
  CRITICAL
  HIGH
  LOW
  MEDIUM
}

enum CaseStatus {
  CANCELLED
  CLOSED
  ESCALATED
  IN_PROGRESS
  NEW
  RESOLVED
  WAITING_FOR_CUSTOMER
  WAITING_FOR_INTERNAL
}

enum CaseType {
  BUG_REPORT
  COMPLAINT
  FEATURE_REQUEST
  PROBLEM
  QUESTION
  TECHNICAL_SUPPORT
}

input CreateCampaignInput {
  budget: Decimal
  endDate: NaiveDate
  name: String!
  startDate: NaiveDate
}

input CreateCaseInput {
  caseNumber: String!
  contactId: UUID
  description: String
  ownerId: UUID!
  priority: CasePriority
  status: CaseStatus
  type: CaseType
}

input CreateCompanyInput {
  annualRevenue: Decimal
  city: String
  country: String
  industry: String
  name: String!
  ownerId: UUID
  phoneNumber: String
  postalCode: String
  state: String
  street: String
  website: String
}

input CreateContactInput {
  companyId: UUID
  email: String!
  jobTitle: String
  name: String!
  ownerId: UUID!
  phoneNumber: String
}

input CreateInteractionInput {
  caseId: UUID
  contactId: UUID!
  interactionDate: DateTime
  notes: String
  outcome: String
  type: InteractionType
  userId: UUID!
}

input CreateInvoiceInput {
  dueDate: NaiveDate
  issueDate: NaiveDate
  items: [CreateInvoiceItemInput!]!
  opportunityId: UUID
  paidAt: DateTime
  paymentMethod: PaymentMethod
  sentAt: DateTime
  status: InvoiceStatus
  total: Decimal
}

input CreateInvoiceItemInput {
  price: Decimal!
  productId: UUID!
  quantity: Int!
}

input CreateLeadInput {
  campaignId: UUID
  convertedAt: DateTime
  convertedCompanyId: UUID
  convertedContactId: UUID
  convertedOpportunityId: UUID
  email: String!
  leadScore: Int
  leadSource: LeadSource
  name: String!
  ownerId: UUID!
  status: LeadStatus
}

input CreateNotificationInput {
  isRead: Boolean
  link: String
  message: String!
  userId: UUID!
}

input CreateOpportunityInput {
  campaignId: UUID
  companyId: UUID
  contactId: UUID
  dealValue: Decimal
  expectedCloseDate: NaiveDate
  lostReason: String
  name: String!
  ownerId: UUID!
  probability: Float
  source: OpportunitySource
  stage: OpportunityStage
}

input CreateProductInput {
  description: String
  name: String!
  price: Decimal!
  sku: String
  type: ProductType
}

input CreateTagInput {
  name: String!
}

type CrmAttachments {
  createdAt: DateTime
  fileName: String!
  filePath: String!
  id: UUID!
  mimeType: String
  recordId: UUID
  recordType: RecordType
  updatedAt: DateTime
}

type CrmCampaigns {
  budget: Decimal
  createdAt: DateTime
  endDate: NaiveDate
  id: UUID!
  name: String!
  startDate: NaiveDate
  updatedAt: DateTime
}

type CrmCases {
  caseNumber: String!
  contact: CrmContacts
  createdAt: DateTime
  description: String
  id: UUID!
  owner: AuthUser!
  priority: CasePriority
  status: CaseStatus
  type: CaseType
  updatedAt: DateTime
}

type CrmCompanies {
  annualRevenue: Decimal
  city: String
  country: String
  createdAt: DateTime
  id: UUID!
  industry: String
  name: String!
  owner: AuthUser
  phoneNumber: String
  postalCode: String
  state: String
  street: String
  updatedAt: DateTime
  website: String
}

type CrmContacts {
  company: CrmCompanies
  companyId: UUID
  createdAt: DateTime
  email: String!
  id: UUID!
  jobTitle: String
  name: String!
  owner: AuthUser!
  ownerId: UUID!
  phoneNumber: String
  updatedAt: DateTime
}

type CrmInteractions {
  case: CrmCases
  contact: CrmContacts!
  createdAt: DateTime
  id: UUID!
  interactionDate: DateTime
  notes: String
  outcome: String
  type: InteractionType
  updatedAt: DateTime
  user: AuthUser!
}

type CrmInvoiceItems {
  createdAt: DateTime
  id: UUID!
  invoice: CrmInvoices!
  price: Decimal!
  product: CrmProducts!
  quantity: Int!
  updatedAt: DateTime
}

type CrmInvoices {
  createdAt: DateTime
  dueDate: NaiveDate
  id: UUID!
  issueDate: NaiveDate
  items(limit: Int!, page: Int!): [CrmInvoiceItems!]!
  opportunity: CrmOpportunities
  opportunityId: UUID
  paidAt: DateTime
  paymentMethod: PaymentMethod
  sentAt: DateTime
  status: InvoiceStatus
  total: Decimal
  updatedAt: DateTime
}

type CrmLeads {
  campaign: CrmCampaigns
  convertedAt: DateTime
  convertedContact: CrmContacts
  convertedOpportunity: CrmOpportunities
  createdAt: DateTime
  email: String!
  id: UUID!
  leadScore: Int
  leadSource: LeadSource
  name: String!
  owner: AuthUser!
  status: LeadStatus
  updatedAt: DateTime
}

type CrmMutations {
  addInvoiceItem(id: UUID!, payload: CreateInvoiceItemInput!): CrmInvoices!
  createCampaign(payload: CreateCampaignInput!): CrmCampaigns!
  createCase(payload: CreateCaseInput!): CrmCases!
  createCompany(payload: CreateCompanyInput!): CrmCompanies!
  createContact(payload: CreateContactInput!): CrmContacts!
  createInteraction(payload: CreateInteractionInput!): CrmInteractions!
  createInvoice(payload: CreateInvoiceInput!): CrmInvoices!
  createLead(payload: CreateLeadInput!): CrmLeads!
  createNotification(payload: CreateNotificationInput!): CrmNotifications!
  createOpportunity(payload: CreateOpportunityInput!): CrmOpportunities!
  createProduct(payload: CreateProductInput!): CrmProducts!
  createTag(payload: CreateTagInput!): CrmTags!
  removeAttachment(id: UUID!): String!
  removeCampaign(id: UUID!): String!
  removeCase(id: UUID!): String!
  removeCompany(id: UUID!): String!
  removeContact(id: UUID!): String!
  removeInteraction(id: UUID!): String!
  removeInvoice(id: UUID!): String!
  removeInvoiceItem(itemId: UUID!): CrmInvoices!
  removeLead(id: UUID!): String!
  removeNotification(id: UUID!): String!
  removeOpportunity(id: UUID!): String!
  removeProduct(id: UUID!): String!
  removeTag(id: UUID!): String!
  updateCampaignBudget(budget: Decimal!, id: UUID!): CrmCampaigns!
  updateCampaignEndDate(endDate: NaiveDate!, id: UUID!): CrmCampaigns!
  updateCampaignName(id: UUID!, name: String!): CrmCampaigns!
  updateCampaignStartDate(id: UUID!, startDate: NaiveDate!): CrmCampaigns!
  updateCaseContactId(contactId: UUID, id: UUID!): CrmCases!
  updateCaseDescription(description: String, id: UUID!): CrmCases!
  updateCaseNumber(caseNumber: String!, id: UUID!): CrmCases!
  updateCaseOwnerId(id: UUID!, ownerId: UUID!): CrmCases!
  updateCasePriority(id: UUID!, priority: CasePriority): CrmCases!
  updateCaseStatus(id: UUID!, status: CaseStatus): CrmCases!
  updateCaseType(id: UUID!, type: CaseType): CrmCases!
  updateCompanyAnnualRevenue(annualRevenue: Decimal, id: UUID!): CrmCompanies!
  updateCompanyCity(city: String, id: UUID!): CrmCompanies!
  updateCompanyCountry(country: String, id: UUID!): CrmCompanies!
  updateCompanyIndustry(id: UUID!, industry: String): CrmCompanies!
  updateCompanyName(id: UUID!, name: String!): CrmCompanies!
  updateCompanyOwnerId(id: UUID!, ownerId: UUID): CrmCompanies!
  updateCompanyPhoneNumber(id: UUID!, phoneNumber: String): CrmCompanies!
  updateCompanyPostalCode(id: UUID!, postalCode: String): CrmCompanies!
  updateCompanyState(id: UUID!, state: String): CrmCompanies!
  updateCompanyStreet(id: UUID!, street: String): CrmCompanies!
  updateCompanyWebsite(id: UUID!, website: String): CrmCompanies!
  updateContactCompanyId(companyId: UUID, id: UUID!): CrmContacts!
  updateContactEmail(email: String!, id: UUID!): CrmContacts!
  updateContactJobTitle(id: UUID!, jobTitle: String): CrmContacts!
  updateContactName(id: UUID!, name: String!): CrmContacts!
  updateContactOwnerId(id: UUID!, ownerId: UUID!): CrmContacts!
  updateContactPhoneNumber(id: UUID!, phoneNumber: String): CrmContacts!
  updateInteractionCaseId(caseId: UUID, id: UUID!): CrmInteractions!
  updateInteractionContactId(contactId: UUID!, id: UUID!): CrmInteractions!
  updateInteractionInteractionDate(id: UUID!, interactionDate: DateTime): CrmInteractions!
  updateInteractionNotes(id: UUID!, notes: String): CrmInteractions!
  updateInteractionOutcome(id: UUID!, outcome: String): CrmInteractions!
  updateInteractionType(id: UUID!, type: InteractionType): CrmInteractions!
  updateInteractionUserId(id: UUID!, userId: UUID!): CrmInteractions!
  updateInvoiceDueDate(dueDate: NaiveDate, id: UUID!): CrmInvoices!
  updateInvoiceIssueDate(id: UUID!, issueDate: NaiveDate): CrmInvoices!
  updateInvoiceOpportunityId(id: UUID!, opportunityId: UUID): CrmInvoices!
  updateInvoicePaidAt(id: UUID!, paidAt: DateTime): CrmInvoices!
  updateInvoicePaymentMethod(id: UUID!, paymentMethod: PaymentMethod): CrmInvoices!
  updateInvoiceSentAt(id: UUID!, sentAt: DateTime): CrmInvoices!
  updateInvoiceStatus(id: UUID!, status: InvoiceStatus): CrmInvoices!
  updateInvoiceTotal(id: UUID!, total: Decimal): CrmInvoices!
  updateLeadCampaignId(campaignId: UUID, id: UUID!): CrmLeads!
  updateLeadConvertedAt(convertedAt: DateTime, id: UUID!): CrmLeads!
  updateLeadConvertedCompanyId(convertedCompanyId: UUID, id: UUID!): CrmLeads!
  updateLeadConvertedContactId(convertedContactId: UUID, id: UUID!): CrmLeads!
  updateLeadConvertedOpportunityId(convertedOpportunityId: UUID, id: UUID!): CrmLeads!
  updateLeadEmail(email: String!, id: UUID!): CrmLeads!
  updateLeadLeadScore(id: UUID!, leadScore: Int): CrmLeads!
  updateLeadLeadSource(id: UUID!, leadSource: LeadSource): CrmLeads!
  updateLeadName(id: UUID!, name: String!): CrmLeads!
  updateLeadOwnerId(id: UUID!, ownerId: UUID!): CrmLeads!
  updateLeadStatus(id: UUID!, status: LeadStatus): CrmLeads!
  updateNotificationIsRead(id: UUID!, isRead: Boolean): CrmNotifications!
  updateNotificationLink(id: UUID!, link: String): CrmNotifications!
  updateNotificationMessage(id: UUID!, message: String!): CrmNotifications!
  updateNotificationUserId(id: UUID!, userId: UUID!): CrmNotifications!
  updateOpportunityCampaignId(campaignId: UUID, id: UUID!): CrmOpportunities!
  updateOpportunityCompanyId(companyId: UUID, id: UUID!): CrmOpportunities!
  updateOpportunityContactId(contactId: UUID, id: UUID!): CrmOpportunities!
  updateOpportunityDealValue(dealValue: Decimal, id: UUID!): CrmOpportunities!
  updateOpportunityExpectedCloseDate(expectedCloseDate: NaiveDate, id: UUID!): CrmOpportunities!
  updateOpportunityLostReason(id: UUID!, lostReason: String): CrmOpportunities!
  updateOpportunityName(id: UUID!, name: String!): CrmOpportunities!
  updateOpportunityOwnerId(id: UUID!, ownerId: UUID!): CrmOpportunities!
  updateOpportunityProbability(id: UUID!, probability: Float): CrmOpportunities!
  updateOpportunitySource(id: UUID!, source: OpportunitySource): CrmOpportunities!
  updateOpportunityStage(id: UUID!, stage: OpportunityStage): CrmOpportunities!
  updateProductDescription(description: String, id: UUID!): CrmProducts!
  updateProductName(id: UUID!, name: String!): CrmProducts!
  updateProductPrice(id: UUID!, price: Decimal!): CrmProducts!
  updateProductSku(id: UUID!, sku: String): CrmProducts!
  updateProductType(id: UUID!, type: ProductType): CrmProducts!
  updateTagName(id: UUID!, name: String!): CrmTags!
  uploadAttachment(file: Upload!, recordId: UUID!, recordType: RecordType!): CrmAttachments!
}

type CrmNotifications {
  createdAt: DateTime
  id: UUID!
  isRead: Boolean
  link: String
  message: String!
  updatedAt: DateTime
  user: AuthUser!
}

type CrmOpportunities {
  campaign: CrmCampaigns
  company: CrmCompanies
  contact: CrmContacts
  createdAt: DateTime
  dealValue: Decimal
  expectedCloseDate: NaiveDate
  id: UUID!
  lostReason: String
  name: String!
  owner: AuthUser!
  probability: Float
  products(limit: Int!, page: Int!): [CrmProducts!]!
  source: OpportunitySource
  stage: OpportunityStage
  updatedAt: DateTime
}

type CrmProducts {
  createdAt: DateTime
  description: String
  id: UUID!
  name: String!
  price: Decimal!
  sku: String
  type: ProductType
  updatedAt: DateTime
}

type CrmQueries {
  attachment(id: UUID!): CrmAttachments
  attachments(limit: Int!, page: Int!): [CrmAttachments!]!
  campaign(id: UUID!): CrmCampaigns
  campaigns(limit: Int!, page: Int!): [CrmCampaigns!]!
  case(id: UUID!): CrmCases
  cases(limit: Int!, page: Int!): [CrmCases!]!
  companies(limit: Int!, page: Int!): [CrmCompanies!]!
  company(id: UUID!): CrmCompanies
  contact(id: UUID!): CrmContacts
  contacts(limit: Int!, page: Int!): [CrmContacts!]!
  interaction(id: UUID!): CrmInteractions
  interactions(limit: Int!, page: Int!): [CrmInteractions!]!
  invoice(id: UUID!): CrmInvoices
  invoices(limit: Int!, page: Int!): [CrmInvoices!]!
  lead(id: UUID!): CrmLeads
  leads(limit: Int!, page: Int!): [CrmLeads!]!
  notification(id: UUID!): CrmNotifications
  notifications(limit: Int!, page: Int!): [CrmNotifications!]!
  opportunities(limit: Int!, page: Int!): [CrmOpportunities!]!
  opportunity(id: UUID!): CrmOpportunities
  product(id: UUID!): CrmProducts
  products(limit: Int!, page: Int!): [CrmProducts!]!
  tag(id: UUID!): CrmTags
  tags(limit: Int!, page: Int!): [CrmTags!]!
}

type CrmTags {
  createdAt: DateTime
  id: UUID!
  name: String!
  updatedAt: DateTime
}

"""
Implement the DateTime<Utc> scalar

The input/output is a string in RFC3339 format.
"""
scalar DateTime

scalar Decimal

enum InteractionType {
  CALL
  EMAIL
  MEETING
  TEXT
}

enum InvoiceStatus {
  CANCELLED
  DRAFT
  OVERDUE
  PAID
  SENT
}

enum LeadSource {
  ADVERTISEMENT
  COLD_CALL
  EMAIL_CAMPAIGN
  EVENT
  OTHER
  PARTNER
  REFERRAL
  SOCIAL_MEDIA
  WEBSITE
}

enum LeadStatus {
  CONTACTED
  CONVERTED
  NEW
  QUALIFIED
  UNQUALIFIED
}

type Mutations {
  auth: AuthMutation!
  crm: CrmMutations!
}

"""
ISO 8601 calendar date without timezone.
Format: %Y-%m-%d

# Examples

* `1994-11-13`
* `2000-02-24`
"""
scalar NaiveDate

enum OpportunitySource {
  ADVERTISEMENT
  COLD_CALL
  EMAIL_CAMPAIGN
  EVENT
  EXISTING_CUSTOMER
  OTHER
  PARTNER
  REFERRAL
  SOCIAL_MEDIA
  WEBSITE
}

enum OpportunityStage {
  CLOSED_LOST
  CLOSED_WON
  DEMO
  NEED_ANALYSIS
  NEGOTIATION
  PROPOSAL
  PROSPECTING
  QUALIFICATION
}

enum PaymentMethod {
  BANK_TRANSFER
  CASH
  CHECK
  CREDIT_CARD
  PAYPAL
  STRIPE
  WIRE_TRANSFER
}

enum ProductType {
  DIGITAL
  GOOD
  SERVICE
  SUBSCRIPTION
}

type Query {
  auth: AuthQuery!
  crm: CrmQueries!
}

enum RecordType {
  CAMPAIGNS
  CASES
  COMPANIES
  CONTACTS
  INTERACTIONS
  INVOICES
  LEADS
  OPPORTUNITIES
  PRODUCTS
}

type RefreshSessionResponse {
  token: String!
  user: AuthUser!
}

type RevokeSessionResponse {
  message: String!
  success: Boolean!
}

input SignInEmailInput {
  email: String!
  password: String!
}

type SignInResponse {
  token: String!
  user: AuthUser!
}

input SignUpEmailInput {
  email: String!
  name: String!
  password: String!
}

type SignUpResponse {
  token: String!
  user: AuthUser!
}

"""
A UUID is a unique 128-bit number, stored as 16 octets. UUIDs are parsed as
Strings within GraphQL. UUIDs are used to assign unique identifiers to
entities without requiring a central allocating authority.

# References

* [Wikipedia: Universally Unique Identifier](http://en.wikipedia.org/wiki/Universally_unique_identifier)
* [RFC4122: A Universally Unique Identifier (UUID) URN Namespace](http://tools.ietf.org/html/rfc4122)
"""
scalar UUID

scalar Upload