# User Story: Interactive Sales Pipeline Dashboard

**User Story:** As a sales manager, I want an interactive dashboard to track
sales opportunities, so that I can effectively manage my team's performance and
forecast revenue.

**Acceptance Criteria:**

- **Given** I am logged in as a sales manager **When** I navigate to the CRM
  dashboard **Then** I should see a chart displaying the current sales pipeline
  stages (e.g., "New," "Qualification," "Proposal," "Closed-Won,"
  "Closed-Lost").

- **Given** the sales pipeline chart is displayed **When** a new opportunity is
  created or an existing one moves to a different stage **Then** the chart
  should update in real-time to reflect the changes without requiring a page
  refresh.

- **Given** I am viewing the sales pipeline chart **When** I hover over a
  specific stage in the chart **Then** a tooltip should appear, showing the
  number of opportunities and the total deal value for that stage.

- **Given** the dashboard is displaying data **When** the connection to the
  server is temporarily lost **Then** the dashboard should show a visual
  indicator that the data is stale and attempt to reconnect automatically.

**Developer Rationale:**

This user story is a strong candidate for a sprint because it delivers a
high-value feature that is both independent and testable. It is negotiable as
the development team can discuss the choice of charting library, the specific
real-time update mechanism (e.g., WebSockets vs. polling), and the precise
details of the UI/UX for the tooltips and stale data indicators. The story is
small enough to be estimated and completed within a single sprint while
providing a solid foundation for more advanced analytics features in the future.

---

# User Story: Marketing Campaign Performance Tracking

**User Story:** As a marketing manager, I want to track the performance of
marketing campaigns, so that I can measure ROI and optimize future campaigns.

**Acceptance Criteria:**

- **Given** I am logged in as a marketing manager **When** I create a new
  campaign **Then** I should be able to define its name, budget, start date, and
  end date.

- **Given** a campaign is active **When** new leads are generated and associated
  with the campaign **Then** the dashboard should show the number of leads
  generated by that campaign.

- **Given** I am viewing a campaign's details **When** I look at the campaign's
  performance metrics **Then** I should see the total number of opportunities
  created and the total value of won deals attributed to the campaign.

---

# User Story: Customer Support Case Management

**User Story:** As a customer support agent, I want to manage customer cases
efficiently, so that I can resolve issues quickly and improve customer
satisfaction.

**Acceptance Criteria:**

- **Given** I am logged in as a support agent **When** a new customer case is
  created **Then** it should be assigned a unique case number and a "New"
  status.

- **Given** I am viewing a case **When** I add a new comment or update **Then**
  the case history should be updated with a timestamp and my name.

- **Given** a case is resolved **When** I change its status to "Closed" **Then**
  the case should be moved from the active cases list to the resolved cases
  archive.

---

# User Story: Centralized Company and Contact Management

**User Story:** As a sales representative, I want a centralized place to manage
company and contact information, so that I can easily access and update customer
data.

**Acceptance Criteria:**

- **Given** I am logged in as a sales representative **When** I create a new
  company **Then** I must enter the company name, and I can optionally add
  address, phone number, and industry.

- **Given** I am viewing a company's profile **When** I add a new contact to
  that company **Then** the contact should be associated with the company and
  appear in the company's contact list.

- **Given** I am viewing a contact's profile **When** I log a new interaction
  (e.g., a call or meeting) **Then** the interaction should be recorded in the
  contact's activity history.

---

# User Story: Interaction Logging and History

**User Story:** As a sales representative, I want to log all interactions with
contacts, so that I have a complete history of communication for each customer.

**Acceptance Criteria:**

- **Given** I am on a contact's page **When** I click "Log Interaction" **Then**
  I should be able to select the interaction type (e.g., "Call," "Email,"
  "Meeting"), add notes, and set the date and time.

- **Given** an interaction has been logged **When** I view the contact's
  activity feed **Then** the new interaction should appear at the top of the
  list, showing the type, date, and a summary of the notes.

---

# User Story: Invoice Generation and Tracking

**User Story:** As an account manager, I want to generate invoices from won
opportunities, so that I can streamline the billing process.

**Acceptance Criteria:**

- **Given** an opportunity is marked as "Closed-Won" **When** I select the
  "Generate Invoice" option **Then** a new draft invoice should be created,
  pre-filled with the customer's information and the products from the
  opportunity.

- **Given** I am editing a draft invoice **When** I add line items, specify
  quantities, and set prices **Then** the invoice total should be calculated
  automatically.

- **Given** an invoice has been sent to a customer **When** the payment is
  received **Then** I should be able to mark the invoice as "Paid," and its
  status should be updated accordingly.

---

# User Story: Lead Capture and Conversion

**User Story:** As a sales development representative (SDR), I want to capture
new leads and convert them into opportunities, so that I can build a strong
sales pipeline.

**Acceptance Criteria:**

- **Given** I have information for a new lead **When** I create a new lead
  record **Then** I must provide a name and email address, and I can optionally
  add a lead source and status.

- **Given** I am working on a lead **When** I determine the lead is qualified
  **Then** I should be able to convert the lead, which automatically creates a
  new company, contact, and opportunity record from the lead's information.

- **Given** a lead is converted **When** I view the original lead record
  **Then** its status should be updated to "Qualified" and it should be linked
  to the newly created opportunity.

---

# User Story: Service Catalog Management

**User Story:** As a sales manager, I want to manage a catalog of the services
we sell (e.g., "Next-Day Delivery," "Warehousing"), so that my team can
accurately add these services to sales opportunities.

**Acceptance Criteria:**

- **Given** I am logged in as a sales manager **When** I add a new service to
  the catalog **Then** I must define a service name, a unique SKU, and a price.

- **Given** I am creating or editing an opportunity **When** I add services to
  the opportunity **Then** I should be able to search for and select services
  from the existing service catalog.

- **Given** a service's price changes **When** I update the price in the service
  catalog **Then** any new opportunities created with that service should
  reflect the new price, while existing opportunities remain unaffected.

---

# User Story: Role-Based Access Control

**User Story:** As an administrator, I want to define user roles and
permissions, so that I can ensure data security and that team members only
access information relevant to their job function.

**Acceptance Criteria:**

- **Given** I am logged in as an administrator **When** I navigate to the "Roles
  and Permissions" settings **Then** I should be able to create, edit, and
  delete roles.

- **Given** I am creating or editing a role **When** I assign permissions to
  that role (e.g., "Create," "Read," "Update," "Delete" for each resource)
  **Then** users assigned to that role should only be able to perform the
  allowed actions.

- **Given** a user is assigned to a specific role **When** they attempt to
  access a resource or perform an action they do not have permission for
  **Then** they should be shown an "Access Denied" message.

---

# User Story: Advanced Data Filtering and Saved Views

**User Story:** As a sales representative, I want to filter my contact list by
multiple criteria (like location, lead source, and last interaction date) and
save that filter as a custom view, so that I can quickly access targeted lists
for my outreach campaigns.

**Acceptance Criteria:**

- **Given** I am on a list view page (e.g., Contacts, Companies, Opportunities)
  **When** I apply one or more filters **Then** the list should update in
  real-time to show only the matching records.

- **Given** I have an active set of filters **When** I click "Save View" and
  provide a name **Then** the current filter configuration should be saved for
  future use.

- **Given** I have saved custom views **When** I return to the list view page
  **Then** I should be able to select one of my saved views from a dropdown to
  quickly re-apply the filter set.

---

# User Story: Data Import and Export

**User Story:** As a sales manager, I want to import a list of leads from a CSV
file, so that I can quickly add new data from events or marketing campaigns
without manual entry.

**Acceptance Criteria:**

- **Given** I am on the "Leads" page **When** I select the "Import from CSV"
  option **Then** I should be prompted to upload a file.

- **Given** I have uploaded a CSV file **When** I map the columns from my file
  to the corresponding fields in the CRM (e.g., "First Name," "Email," "Company
  Name") **Then** the system should validate the data and show a preview of the
  records to be imported.

- **Given** I confirm the import **When** the import process is complete
  **Then** the new leads should appear in the leads list, and I should receive a
  summary report of how many records were successfully imported and if any
  failed.

---

# User Story: Automated Notifications

**User Story:** As a sales representative, I want to receive an in-app
notification when a new lead is assigned to me, so that I can follow up
promptly.

**Acceptance Criteria:**

- **Given** a new lead is assigned to me by my manager **When** I am logged into
  the application **Then** a notification badge should appear on the
  notification icon in the main navigation bar.

- **Given** I click on the notification icon **When** the notification panel
  opens **Then** I should see a new notification that reads, "A new lead, [Lead
  Name], has been assigned to you."

- **Given** I click on the notification **When** I am redirected to the lead's
  detail page **Then** the notification should be marked as "read" and no longer
  appear as new.

---

# User Story: Comprehensive Reporting

**User Story:** As a sales manager, I want to generate a quarterly sales report
that shows performance by a sales representative, including leads converted,
opportunities won, and total revenue generated, so that I can conduct
performance reviews and identify coaching opportunities.

**Acceptance Criteria:**

- **Given** I am on the "Reports" page **When** I select the "Quarterly Sales
  Performance" report and choose a quarter **Then** a report should be generated
  showing a breakdown of key metrics for each sales representative.

- **Given** the report is generated **When** I view the report **Then** it
  should include columns for "Sales Rep," "Leads Converted," "Opportunities
  Won," and "Total Revenue."

- **Given** I am viewing the report **When** I click the "Export to PDF" button
  **Then** a PDF version of the report should be generated and downloaded,
  suitable for sharing and printing.
