type CreditNotes {
  id: ID!
  invoice: BillingInvoices!
  dispute: Disputes
  creditNoteNumber: String!
  amount: Float!
  reason: String!
  issueDate: String!
  appliedAt: String
  currency: String
  notes: String
  createdByUser: User
  createdAt: Date
  updatedAt: Date
}

extend type BillingQuery {
  creditNotes(page: Int, perPage: Int, from: Date, to: Date, search: String): [CreditNotes!]!
  creditNote(id: ID!): CreditNotes!
}

input CreateCreditNoteInput {
  invoiceId: ID!
  disputeId: ID
  creditNoteNumber: String!
  amount: Float!
  reason: String!
  issueDate: String!
  appliedAt: String
  currency: String
  notes: String
  createdByUserId: ID
}

input UpdateCreditNoteInput {
  creditNoteNumber: String
  amount: Float
  reason: String
  appliedAt: String
  currency: String
  notes: String
}

extend type BillingMutation {
  createCreditNote(value: CreateCreditNoteInput!): CreditNotes!
  updateCreditNote(id: ID!, value: UpdateCreditNoteInput): CreditNotes!
  removeCreditNote(id: ID!): DeleteResult!
}

type CreditNoteAppliedEvent {
  creditNote: CreditNotes!
  appliedAmount: String!
}

type CreditNoteOnDisputeApprovalEvent {
  creditNote: CreditNotes!
  disputeId: ID!
}

extend type BillingSubscription {
  creditNoteIssued: CreditNotes!
  creditNoteApplied: CreditNoteAppliedEvent!
  creditNoteOnDisputeApproval: CreditNoteOnDisputeApprovalEvent!
}
