enum SurchargeCalculationMethod {
	PERCENTAGE
	FIXED
	PER_UNIT
	SLIDING_SCALE
}

type Surcharges {
	id: ID!
	name: String!
	type: String!
	amount: Float!
	calculationMethod: SurchargeCalculationMethod!
	isActive: Boolean
	validFrom: String
	validTo: String
	description: String
	createdAt: Date
	updatedAt: Date
}

extend type BillingQuery {
	surcharges(
		page: Int
		perPage: Int
		from: Date
		to: Date
		search: String
		calculationMethod: SurchargeCalculationMethod
	): [Surcharges!]!
	surcharge(id: ID!): Surcharges!
}

input CreateSurchargeInput {
	name: String! @constraint(minLength: 1)
	type: String! @constraint(minLength: 1)
	amount: Float! @constraint(min: 0)
	calculationMethod: SurchargeCalculationMethod!
	isActive: Boolean
	validFrom: String @constraint(minLength: 1)
	validTo: String @constraint(minLength: 1)
	description: String @constraint(minLength: 1)
}

input UpdateSurchargeInput {
	name: String @constraint(minLength: 1)
	type: String @constraint(minLength: 1)
	amount: Float @constraint(min: 0)
	calculationMethod: SurchargeCalculationMethod
	isActive: Boolean
	validFrom: String @constraint(minLength: 1)
	validTo: String @constraint(minLength: 1)
	description: String @constraint(minLength: 1)
}

extend type BillingMutation {
	createSurcharge(value: CreateSurchargeInput!): Surcharges!
	updateSurcharge(id: ID!, value: UpdateSurchargeInput): Surcharges!
	removeSurcharge(id: ID!): DeleteResult!
}

type SurchargeDeactivatedEvent {
	id: ID!
	reason: String!
}

extend type Subscription {
	surchargeDeactivated: SurchargeDeactivatedEvent!
}
