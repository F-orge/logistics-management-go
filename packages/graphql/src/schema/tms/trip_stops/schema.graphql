enum TripStopStatus {
	PENDING
	ARRIVED
	COMPLETED
	SKIPPED
}

type TripStops {
	id: ID!
	trip: Trips!
	shipment: OutboundShipments
	sequence: Int!
	address: String
	status: TripStopStatus
	estimatedArrivalTime: String
	actualArrivalTime: String
	estimatedDepartureTime: String
	actualDepartureTime: String
	createdAt: Date
	updatedAt: Date
	proofOfDeliveries: [ProofOfDeliveries!]
}

input CreateTripStopInput {
	tripId: ID!
	shipmentId: ID
	sequence: Int! @constraint(min: 0)
	address: String @constraint(minLength: 1)
	status: TripStopStatus
	estimatedArrivalTime: String @constraint(minLength: 1)
	estimatedDepartureTime: String @constraint(minLength: 1)
}

input UpdateTripStopInput {
	sequence: Int @constraint(min: 0)
	address: String @constraint(minLength: 1)
	status: TripStopStatus
	estimatedArrivalTime: String @constraint(minLength: 1)
	actualArrivalTime: String @constraint(minLength: 1)
	estimatedDepartureTime: String @constraint(minLength: 1)
	actualDepartureTime: String @constraint(minLength: 1)
}

extend type TmsQuery {
	tripStops(
		page: Int
		perPage: Int
		tripId: ID
		status: TripStopStatus
	): [TripStops!]!
	tripStop(id: ID!): TripStops!
}

extend type TmsMutation {
	createTripStop(value: CreateTripStopInput!): TripStops!
	updateTripStop(id: ID!, value: UpdateTripStopInput): TripStops!
	removeTripStop(id: ID!): DeleteResult!
}

type TmsTripStopSkippedEvent {
	tripStop: TripStops!
	reason: String
}

extend type Subscription {
	tripStopArrived: TripStops!
	tripStopCompleted: TripStops!
	tripStopSkipped: TmsTripStopSkippedEvent!
}
