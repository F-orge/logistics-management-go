enum VehicleStatus {
	AVAILABLE
	IN_MAINTENANCE
	ON_TRIP
	OUT_OF_SERVICE
}

type Vehicles {
	id: ID!
	registrationNumber: String!
	model: String
	capacityVolume: Float
	capacityWeight: Float
	status: VehicleStatus
	make: String
	year: Int
	vin: String
	currentMileage: Int
	lastMaintenanceDate: String
	createdAt: Date
	updatedAt: Date
	maintenances: [VehicleMaintenance!]
	trips: [Trips!]
	gpsPings: [GpsPings!]
	geofenceEvents: [GeofenceEvents!]
}

extend type TmsQuery {
	vehicles(
		page: Int
		perPage: Int
		from: Date
		to: Date
		search: String
		status: VehicleStatus
	): [Vehicles!]!
	vehicle(id: ID!): Vehicles!
}

input CreateVehicleInput {
	registrationNumber: String! @constraint(minLength: 1)
	model: String @constraint(minLength: 1)
	capacityVolume: Float @constraint(min: 0)
	capacityWeight: Float @constraint(min: 0)
	status: VehicleStatus
	make: String @constraint(minLength: 1)
	year: Int @constraint(min: 0)
	vin: String @constraint(minLength: 1)
	currentMileage: Int @constraint(min: 0)
	lastMaintenanceDate: String
}

input UpdateVehicleInput {
	registrationNumber: String @constraint(minLength: 1)
	model: String @constraint(minLength: 1)
	capacityVolume: Float @constraint(min: 0)
	capacityWeight: Float @constraint(min: 0)
	status: VehicleStatus
	make: String @constraint(minLength: 1)
	year: Int @constraint(min: 0)
	vin: String @constraint(minLength: 1)
	currentMileage: Int @constraint(min: 0)
	lastMaintenanceDate: String
}

extend type TmsMutation {
	createVehicle(value: CreateVehicleInput!): Vehicles!
	updateVehicle(id: ID!, value: UpdateVehicleInput): Vehicles!
	removeVehicle(id: ID!): DeleteResult!
}

type TmsVehicleStatusChangedEvent {
	id: ID!
	newStatus: VehicleStatus!
	previousStatus: VehicleStatus!
}

extend type Subscription {
	vehicleStatusChanged: TmsVehicleStatusChangedEvent!
	vehicleMaintenanceScheduled: VehicleMaintenance!
}
