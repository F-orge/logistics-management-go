// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: wms_outbound_shipments.sql

package models

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const wmsAnyOutboundShipment = `-- name: WmsAnyOutboundShipment :many
select
  outbound_shipments.id, outbound_shipments.sales_order_id, outbound_shipments.warehouse_id, outbound_shipments.status, outbound_shipments.tracking_number, outbound_shipments.carrier, outbound_shipments.created_at, outbound_shipments.updated_at, outbound_shipments.outbound_shipment_items,
  sales_order.id, sales_order.order_number, sales_order.client_id, sales_order.crm_opportunity_id, sales_order.status, sales_order.shipping_address, sales_order.created_at, sales_order.updated_at
from
  "wms"."outbound_shipments_view" as outbound_shipments
  inner join "wms"."sales_orders" as sales_order on outbound_shipments.sales_order_id = sales_order.id
where
  outbound_shipments.id = any ($1::uuid[])
`

type WmsAnyOutboundShipmentRow struct {
	WmsOutboundShipmentsView WmsOutboundShipmentsView `db:"wms_outbound_shipments_view" json:"wms_outbound_shipments_view"`
	WmsSalesOrder            WmsSalesOrder            `db:"wms_sales_order" json:"wms_sales_order"`
}

func (q *Queries) WmsAnyOutboundShipment(ctx context.Context, ids []pgtype.UUID) ([]WmsAnyOutboundShipmentRow, error) {
	rows, err := q.db.Query(ctx, wmsAnyOutboundShipment, ids)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsAnyOutboundShipmentRow
	for rows.Next() {
		var i WmsAnyOutboundShipmentRow
		if err := rows.Scan(
			&i.WmsOutboundShipmentsView.ID,
			&i.WmsOutboundShipmentsView.SalesOrderID,
			&i.WmsOutboundShipmentsView.WarehouseID,
			&i.WmsOutboundShipmentsView.Status,
			&i.WmsOutboundShipmentsView.TrackingNumber,
			&i.WmsOutboundShipmentsView.Carrier,
			&i.WmsOutboundShipmentsView.CreatedAt,
			&i.WmsOutboundShipmentsView.UpdatedAt,
			&i.WmsOutboundShipmentsView.OutboundShipmentItems,
			&i.WmsSalesOrder.ID,
			&i.WmsSalesOrder.OrderNumber,
			&i.WmsSalesOrder.ClientID,
			&i.WmsSalesOrder.CrmOpportunityID,
			&i.WmsSalesOrder.Status,
			&i.WmsSalesOrder.ShippingAddress,
			&i.WmsSalesOrder.CreatedAt,
			&i.WmsSalesOrder.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsFindOutboundShipment = `-- name: WmsFindOutboundShipment :one
select
  outbound_shipments.id, outbound_shipments.sales_order_id, outbound_shipments.warehouse_id, outbound_shipments.status, outbound_shipments.tracking_number, outbound_shipments.carrier, outbound_shipments.created_at, outbound_shipments.updated_at, outbound_shipments.outbound_shipment_items,
  sales_order.id, sales_order.order_number, sales_order.client_id, sales_order.crm_opportunity_id, sales_order.status, sales_order.shipping_address, sales_order.created_at, sales_order.updated_at
from
  "wms"."outbound_shipments_view" as outbound_shipments
  inner join "wms"."sales_orders" as sales_order on outbound_shipments.sales_order_id = sales_order.id
where
  outbound_shipments.id = $1::uuid
`

type WmsFindOutboundShipmentRow struct {
	WmsOutboundShipmentsView WmsOutboundShipmentsView `db:"wms_outbound_shipments_view" json:"wms_outbound_shipments_view"`
	WmsSalesOrder            WmsSalesOrder            `db:"wms_sales_order" json:"wms_sales_order"`
}

func (q *Queries) WmsFindOutboundShipment(ctx context.Context, id pgtype.UUID) (WmsFindOutboundShipmentRow, error) {
	row := q.db.QueryRow(ctx, wmsFindOutboundShipment, id)
	var i WmsFindOutboundShipmentRow
	err := row.Scan(
		&i.WmsOutboundShipmentsView.ID,
		&i.WmsOutboundShipmentsView.SalesOrderID,
		&i.WmsOutboundShipmentsView.WarehouseID,
		&i.WmsOutboundShipmentsView.Status,
		&i.WmsOutboundShipmentsView.TrackingNumber,
		&i.WmsOutboundShipmentsView.Carrier,
		&i.WmsOutboundShipmentsView.CreatedAt,
		&i.WmsOutboundShipmentsView.UpdatedAt,
		&i.WmsOutboundShipmentsView.OutboundShipmentItems,
		&i.WmsSalesOrder.ID,
		&i.WmsSalesOrder.OrderNumber,
		&i.WmsSalesOrder.ClientID,
		&i.WmsSalesOrder.CrmOpportunityID,
		&i.WmsSalesOrder.Status,
		&i.WmsSalesOrder.ShippingAddress,
		&i.WmsSalesOrder.CreatedAt,
		&i.WmsSalesOrder.UpdatedAt,
	)
	return i, err
}

const wmsInsertOutboundShipment = `-- name: WmsInsertOutboundShipment :one
insert into "wms"."outbound_shipments"(sales_order_id, warehouse_id, status, tracking_number, carrier)
  values ($1, $2, $3, $4, $5)
returning
  id, sales_order_id, warehouse_id, status, tracking_number, carrier, created_at, updated_at
`

type WmsInsertOutboundShipmentParams struct {
	SalesOrderID   pgtype.UUID                       `db:"sales_order_id" json:"sales_order_id"`
	WarehouseID    pgtype.UUID                       `db:"warehouse_id" json:"warehouse_id"`
	Status         NullWmsOutboundShipmentStatusEnum `db:"status" json:"status"`
	TrackingNumber pgtype.Text                       `db:"tracking_number" json:"tracking_number"`
	Carrier        pgtype.Text                       `db:"carrier" json:"carrier"`
}

func (q *Queries) WmsInsertOutboundShipment(ctx context.Context, arg WmsInsertOutboundShipmentParams) (WmsOutboundShipment, error) {
	row := q.db.QueryRow(ctx, wmsInsertOutboundShipment,
		arg.SalesOrderID,
		arg.WarehouseID,
		arg.Status,
		arg.TrackingNumber,
		arg.Carrier,
	)
	var i WmsOutboundShipment
	err := row.Scan(
		&i.ID,
		&i.SalesOrderID,
		&i.WarehouseID,
		&i.Status,
		&i.TrackingNumber,
		&i.Carrier,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const wmsPaginateOutboundShipment = `-- name: WmsPaginateOutboundShipment :many
select
  outbound_shipments.id, outbound_shipments.sales_order_id, outbound_shipments.warehouse_id, outbound_shipments.status, outbound_shipments.tracking_number, outbound_shipments.carrier, outbound_shipments.created_at, outbound_shipments.updated_at, outbound_shipments.outbound_shipment_items,
  sales_order.id, sales_order.order_number, sales_order.client_id, sales_order.crm_opportunity_id, sales_order.status, sales_order.shipping_address, sales_order.created_at, sales_order.updated_at
from
  "wms"."outbound_shipments_view" as outbound_shipments
  inner join "wms"."sales_orders" as sales_order on outbound_shipments.sales_order_id = sales_order.id
where (sales_order.order_number ilike $1::text
  or outbound_shipments.tracking_number ilike $1::text
  or outbound_shipments.carrier ilike $1::text
  or outbound_shipments.status::text ilike $1::text
  or $1::text is null)
limit $3::int offset ($2::int - 1) * $3::int
`

type WmsPaginateOutboundShipmentParams struct {
	Search  pgtype.Text `db:"search" json:"search"`
	Page    int32       `db:"page" json:"page"`
	Perpage int32       `db:"perpage" json:"perpage"`
}

type WmsPaginateOutboundShipmentRow struct {
	WmsOutboundShipmentsView WmsOutboundShipmentsView `db:"wms_outbound_shipments_view" json:"wms_outbound_shipments_view"`
	WmsSalesOrder            WmsSalesOrder            `db:"wms_sales_order" json:"wms_sales_order"`
}

func (q *Queries) WmsPaginateOutboundShipment(ctx context.Context, arg WmsPaginateOutboundShipmentParams) ([]WmsPaginateOutboundShipmentRow, error) {
	rows, err := q.db.Query(ctx, wmsPaginateOutboundShipment, arg.Search, arg.Page, arg.Perpage)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsPaginateOutboundShipmentRow
	for rows.Next() {
		var i WmsPaginateOutboundShipmentRow
		if err := rows.Scan(
			&i.WmsOutboundShipmentsView.ID,
			&i.WmsOutboundShipmentsView.SalesOrderID,
			&i.WmsOutboundShipmentsView.WarehouseID,
			&i.WmsOutboundShipmentsView.Status,
			&i.WmsOutboundShipmentsView.TrackingNumber,
			&i.WmsOutboundShipmentsView.Carrier,
			&i.WmsOutboundShipmentsView.CreatedAt,
			&i.WmsOutboundShipmentsView.UpdatedAt,
			&i.WmsOutboundShipmentsView.OutboundShipmentItems,
			&i.WmsSalesOrder.ID,
			&i.WmsSalesOrder.OrderNumber,
			&i.WmsSalesOrder.ClientID,
			&i.WmsSalesOrder.CrmOpportunityID,
			&i.WmsSalesOrder.Status,
			&i.WmsSalesOrder.ShippingAddress,
			&i.WmsSalesOrder.CreatedAt,
			&i.WmsSalesOrder.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsRangeOutboundShipment = `-- name: WmsRangeOutboundShipment :many
select
  outbound_shipments.id, outbound_shipments.sales_order_id, outbound_shipments.warehouse_id, outbound_shipments.status, outbound_shipments.tracking_number, outbound_shipments.carrier, outbound_shipments.created_at, outbound_shipments.updated_at, outbound_shipments.outbound_shipment_items,
  sales_order.id, sales_order.order_number, sales_order.client_id, sales_order.crm_opportunity_id, sales_order.status, sales_order.shipping_address, sales_order.created_at, sales_order.updated_at
from
  "wms"."outbound_shipments_view" as outbound_shipments
  inner join "wms"."sales_orders" as sales_order on outbound_shipments.sales_order_id = sales_order.id
where
  outbound_shipments.created_at >= $1::date
  and outbound_shipments.created_at <= $2::date
  and (sales_order.order_number ilike $3::text
    or outbound_shipments.tracking_number ilike $3::text
    or outbound_shipments.carrier ilike $3::text
    or outbound_shipments.status::text ilike $3::text
    or $3::text is null)
`

type WmsRangeOutboundShipmentParams struct {
	Datefrom pgtype.Date `db:"datefrom" json:"datefrom"`
	Dateto   pgtype.Date `db:"dateto" json:"dateto"`
	Search   pgtype.Text `db:"search" json:"search"`
}

type WmsRangeOutboundShipmentRow struct {
	WmsOutboundShipmentsView WmsOutboundShipmentsView `db:"wms_outbound_shipments_view" json:"wms_outbound_shipments_view"`
	WmsSalesOrder            WmsSalesOrder            `db:"wms_sales_order" json:"wms_sales_order"`
}

func (q *Queries) WmsRangeOutboundShipment(ctx context.Context, arg WmsRangeOutboundShipmentParams) ([]WmsRangeOutboundShipmentRow, error) {
	rows, err := q.db.Query(ctx, wmsRangeOutboundShipment, arg.Datefrom, arg.Dateto, arg.Search)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsRangeOutboundShipmentRow
	for rows.Next() {
		var i WmsRangeOutboundShipmentRow
		if err := rows.Scan(
			&i.WmsOutboundShipmentsView.ID,
			&i.WmsOutboundShipmentsView.SalesOrderID,
			&i.WmsOutboundShipmentsView.WarehouseID,
			&i.WmsOutboundShipmentsView.Status,
			&i.WmsOutboundShipmentsView.TrackingNumber,
			&i.WmsOutboundShipmentsView.Carrier,
			&i.WmsOutboundShipmentsView.CreatedAt,
			&i.WmsOutboundShipmentsView.UpdatedAt,
			&i.WmsOutboundShipmentsView.OutboundShipmentItems,
			&i.WmsSalesOrder.ID,
			&i.WmsSalesOrder.OrderNumber,
			&i.WmsSalesOrder.ClientID,
			&i.WmsSalesOrder.CrmOpportunityID,
			&i.WmsSalesOrder.Status,
			&i.WmsSalesOrder.ShippingAddress,
			&i.WmsSalesOrder.CreatedAt,
			&i.WmsSalesOrder.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsRemoveOutboundShipment = `-- name: WmsRemoveOutboundShipment :exec
delete from "wms"."outbound_shipments"
where id = $1::uuid
`

func (q *Queries) WmsRemoveOutboundShipment(ctx context.Context, id pgtype.UUID) error {
	_, err := q.db.Exec(ctx, wmsRemoveOutboundShipment, id)
	return err
}

const wmsUpdateOutboundShipment = `-- name: WmsUpdateOutboundShipment :one
update
  "wms"."outbound_shipments"
set
  updated_at = now(),
  sales_order_id = case when $1 is not null then
    $1::uuid
  else
    sales_order_id
  end,
  warehouse_id = case when $2 is not null then
    $2::uuid
  else
    warehouse_id
  end,
  status = case when $3 is not null then
    $3::wms.outbound_shipment_status_enum
  else
    status
  end,
  tracking_number = case when $4 is not null then
    $4::varchar
  else
    tracking_number
  end,
  carrier = case when $5 is not null then
    $5::varchar
  else
    carrier
  end
where
  id = $6::uuid
returning
  id, sales_order_id, warehouse_id, status, tracking_number, carrier, created_at, updated_at
`

type WmsUpdateOutboundShipmentParams struct {
	SalesOrderID   pgtype.UUID                       `db:"sales_order_id" json:"sales_order_id"`
	WarehouseID    pgtype.UUID                       `db:"warehouse_id" json:"warehouse_id"`
	Status         NullWmsOutboundShipmentStatusEnum `db:"status" json:"status"`
	TrackingNumber pgtype.Text                       `db:"tracking_number" json:"tracking_number"`
	Carrier        pgtype.Text                       `db:"carrier" json:"carrier"`
	ID             pgtype.UUID                       `db:"id" json:"id"`
}

func (q *Queries) WmsUpdateOutboundShipment(ctx context.Context, arg WmsUpdateOutboundShipmentParams) (WmsOutboundShipment, error) {
	row := q.db.QueryRow(ctx, wmsUpdateOutboundShipment,
		arg.SalesOrderID,
		arg.WarehouseID,
		arg.Status,
		arg.TrackingNumber,
		arg.Carrier,
		arg.ID,
	)
	var i WmsOutboundShipment
	err := row.Scan(
		&i.ID,
		&i.SalesOrderID,
		&i.WarehouseID,
		&i.Status,
		&i.TrackingNumber,
		&i.Carrier,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
