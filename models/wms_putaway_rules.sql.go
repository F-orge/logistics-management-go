// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: wms_putaway_rules.sql

package models

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const wmsAnyPutawayRule = `-- name: WmsAnyPutawayRule :many
select
  putaway_rules.id, putaway_rules.product_id, putaway_rules.client_id, putaway_rules.warehouse_id, putaway_rules.preferred_location_id, putaway_rules.location_type, putaway_rules.priority, putaway_rules.min_quantity, putaway_rules.max_quantity, putaway_rules.weight_threshold, putaway_rules.volume_threshold, putaway_rules.requires_temperature_control, putaway_rules.requires_hazmat_approval, putaway_rules.is_active, putaway_rules.created_at, putaway_rules.updated_at,
  product.id, product.name, product.sku, product.barcode, product.description, product.cost_price, product.length, product.width, product.height, product.volume, product.weight, product.status, product.supplier_id, product.client_id, product.created_at, product.updated_at,
  client.id, client.name, client.street, client.city, client.state, client.postal_code, client.country, client.phone_number, client.industry, client.website, client.annual_revenue, client.owner_id, client.created_at, client.updated_at,
  warehouse.id, warehouse.name, warehouse.address, warehouse.city, warehouse.state, warehouse.postal_code, warehouse.country, warehouse.timezone, warehouse.contact_person, warehouse.contact_email, warehouse.contact_phone, warehouse.is_active, warehouse.created_at, warehouse.updated_at,
  preferred_location.id, preferred_location.warehouse_id, preferred_location.parent_location_id, preferred_location.name, preferred_location.barcode, preferred_location.type, preferred_location.level, preferred_location.path, preferred_location.max_weight, preferred_location.max_volume, preferred_location.max_pallets, preferred_location.x_coordinate, preferred_location.y_coordinate, preferred_location.z_coordinate, preferred_location.is_pickable, preferred_location.is_receivable, preferred_location.temperature_controlled, preferred_location.hazmat_approved, preferred_location.is_active, preferred_location.created_at, preferred_location.updated_at
from
  "wms"."putaway_rules" as putaway_rules
  inner join "wms"."products" as product on putaway_rules.product_id = product.id
  left join "crm"."companies" as client on putaway_rules.client_id = client.id
  inner join "wms"."warehouses" as warehouse on putaway_rules.warehouse_id = warehouse.id
  left join "wms"."locations" as preferred_location on putaway_rules.preferred_location_id = preferred_location.id
where
  putaway_rules.id = any ($1::uuid[])
`

type WmsAnyPutawayRuleRow struct {
	WmsPutawayRule WmsPutawayRule
	WmsProduct     WmsProduct
	CrmCompany     CrmCompany
	WmsWarehouse   WmsWarehouse
	WmsLocation    WmsLocation
}

func (q *Queries) WmsAnyPutawayRule(ctx context.Context, ids []pgtype.UUID) ([]WmsAnyPutawayRuleRow, error) {
	rows, err := q.db.Query(ctx, wmsAnyPutawayRule, ids)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsAnyPutawayRuleRow
	for rows.Next() {
		var i WmsAnyPutawayRuleRow
		if err := rows.Scan(
			&i.WmsPutawayRule.ID,
			&i.WmsPutawayRule.ProductID,
			&i.WmsPutawayRule.ClientID,
			&i.WmsPutawayRule.WarehouseID,
			&i.WmsPutawayRule.PreferredLocationID,
			&i.WmsPutawayRule.LocationType,
			&i.WmsPutawayRule.Priority,
			&i.WmsPutawayRule.MinQuantity,
			&i.WmsPutawayRule.MaxQuantity,
			&i.WmsPutawayRule.WeightThreshold,
			&i.WmsPutawayRule.VolumeThreshold,
			&i.WmsPutawayRule.RequiresTemperatureControl,
			&i.WmsPutawayRule.RequiresHazmatApproval,
			&i.WmsPutawayRule.IsActive,
			&i.WmsPutawayRule.CreatedAt,
			&i.WmsPutawayRule.UpdatedAt,
			&i.WmsProduct.ID,
			&i.WmsProduct.Name,
			&i.WmsProduct.Sku,
			&i.WmsProduct.Barcode,
			&i.WmsProduct.Description,
			&i.WmsProduct.CostPrice,
			&i.WmsProduct.Length,
			&i.WmsProduct.Width,
			&i.WmsProduct.Height,
			&i.WmsProduct.Volume,
			&i.WmsProduct.Weight,
			&i.WmsProduct.Status,
			&i.WmsProduct.SupplierID,
			&i.WmsProduct.ClientID,
			&i.WmsProduct.CreatedAt,
			&i.WmsProduct.UpdatedAt,
			&i.CrmCompany.ID,
			&i.CrmCompany.Name,
			&i.CrmCompany.Street,
			&i.CrmCompany.City,
			&i.CrmCompany.State,
			&i.CrmCompany.PostalCode,
			&i.CrmCompany.Country,
			&i.CrmCompany.PhoneNumber,
			&i.CrmCompany.Industry,
			&i.CrmCompany.Website,
			&i.CrmCompany.AnnualRevenue,
			&i.CrmCompany.OwnerID,
			&i.CrmCompany.CreatedAt,
			&i.CrmCompany.UpdatedAt,
			&i.WmsWarehouse.ID,
			&i.WmsWarehouse.Name,
			&i.WmsWarehouse.Address,
			&i.WmsWarehouse.City,
			&i.WmsWarehouse.State,
			&i.WmsWarehouse.PostalCode,
			&i.WmsWarehouse.Country,
			&i.WmsWarehouse.Timezone,
			&i.WmsWarehouse.ContactPerson,
			&i.WmsWarehouse.ContactEmail,
			&i.WmsWarehouse.ContactPhone,
			&i.WmsWarehouse.IsActive,
			&i.WmsWarehouse.CreatedAt,
			&i.WmsWarehouse.UpdatedAt,
			&i.WmsLocation.ID,
			&i.WmsLocation.WarehouseID,
			&i.WmsLocation.ParentLocationID,
			&i.WmsLocation.Name,
			&i.WmsLocation.Barcode,
			&i.WmsLocation.Type,
			&i.WmsLocation.Level,
			&i.WmsLocation.Path,
			&i.WmsLocation.MaxWeight,
			&i.WmsLocation.MaxVolume,
			&i.WmsLocation.MaxPallets,
			&i.WmsLocation.XCoordinate,
			&i.WmsLocation.YCoordinate,
			&i.WmsLocation.ZCoordinate,
			&i.WmsLocation.IsPickable,
			&i.WmsLocation.IsReceivable,
			&i.WmsLocation.TemperatureControlled,
			&i.WmsLocation.HazmatApproved,
			&i.WmsLocation.IsActive,
			&i.WmsLocation.CreatedAt,
			&i.WmsLocation.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsFindPutawayRule = `-- name: WmsFindPutawayRule :one
select
  putaway_rules.id, putaway_rules.product_id, putaway_rules.client_id, putaway_rules.warehouse_id, putaway_rules.preferred_location_id, putaway_rules.location_type, putaway_rules.priority, putaway_rules.min_quantity, putaway_rules.max_quantity, putaway_rules.weight_threshold, putaway_rules.volume_threshold, putaway_rules.requires_temperature_control, putaway_rules.requires_hazmat_approval, putaway_rules.is_active, putaway_rules.created_at, putaway_rules.updated_at,
  product.id, product.name, product.sku, product.barcode, product.description, product.cost_price, product.length, product.width, product.height, product.volume, product.weight, product.status, product.supplier_id, product.client_id, product.created_at, product.updated_at,
  client.id, client.name, client.street, client.city, client.state, client.postal_code, client.country, client.phone_number, client.industry, client.website, client.annual_revenue, client.owner_id, client.created_at, client.updated_at,
  warehouse.id, warehouse.name, warehouse.address, warehouse.city, warehouse.state, warehouse.postal_code, warehouse.country, warehouse.timezone, warehouse.contact_person, warehouse.contact_email, warehouse.contact_phone, warehouse.is_active, warehouse.created_at, warehouse.updated_at,
  preferred_location.id, preferred_location.warehouse_id, preferred_location.parent_location_id, preferred_location.name, preferred_location.barcode, preferred_location.type, preferred_location.level, preferred_location.path, preferred_location.max_weight, preferred_location.max_volume, preferred_location.max_pallets, preferred_location.x_coordinate, preferred_location.y_coordinate, preferred_location.z_coordinate, preferred_location.is_pickable, preferred_location.is_receivable, preferred_location.temperature_controlled, preferred_location.hazmat_approved, preferred_location.is_active, preferred_location.created_at, preferred_location.updated_at
from
  "wms"."putaway_rules" as putaway_rules
  inner join "wms"."products" as product on putaway_rules.product_id = product.id
  left join "crm"."companies" as client on putaway_rules.client_id = client.id
  inner join "wms"."warehouses" as warehouse on putaway_rules.warehouse_id = warehouse.id
  left join "wms"."locations" as preferred_location on putaway_rules.preferred_location_id = preferred_location.id
where
  putaway_rules.id = $1::uuid
`

type WmsFindPutawayRuleRow struct {
	WmsPutawayRule WmsPutawayRule
	WmsProduct     WmsProduct
	CrmCompany     CrmCompany
	WmsWarehouse   WmsWarehouse
	WmsLocation    WmsLocation
}

func (q *Queries) WmsFindPutawayRule(ctx context.Context, id pgtype.UUID) (WmsFindPutawayRuleRow, error) {
	row := q.db.QueryRow(ctx, wmsFindPutawayRule, id)
	var i WmsFindPutawayRuleRow
	err := row.Scan(
		&i.WmsPutawayRule.ID,
		&i.WmsPutawayRule.ProductID,
		&i.WmsPutawayRule.ClientID,
		&i.WmsPutawayRule.WarehouseID,
		&i.WmsPutawayRule.PreferredLocationID,
		&i.WmsPutawayRule.LocationType,
		&i.WmsPutawayRule.Priority,
		&i.WmsPutawayRule.MinQuantity,
		&i.WmsPutawayRule.MaxQuantity,
		&i.WmsPutawayRule.WeightThreshold,
		&i.WmsPutawayRule.VolumeThreshold,
		&i.WmsPutawayRule.RequiresTemperatureControl,
		&i.WmsPutawayRule.RequiresHazmatApproval,
		&i.WmsPutawayRule.IsActive,
		&i.WmsPutawayRule.CreatedAt,
		&i.WmsPutawayRule.UpdatedAt,
		&i.WmsProduct.ID,
		&i.WmsProduct.Name,
		&i.WmsProduct.Sku,
		&i.WmsProduct.Barcode,
		&i.WmsProduct.Description,
		&i.WmsProduct.CostPrice,
		&i.WmsProduct.Length,
		&i.WmsProduct.Width,
		&i.WmsProduct.Height,
		&i.WmsProduct.Volume,
		&i.WmsProduct.Weight,
		&i.WmsProduct.Status,
		&i.WmsProduct.SupplierID,
		&i.WmsProduct.ClientID,
		&i.WmsProduct.CreatedAt,
		&i.WmsProduct.UpdatedAt,
		&i.CrmCompany.ID,
		&i.CrmCompany.Name,
		&i.CrmCompany.Street,
		&i.CrmCompany.City,
		&i.CrmCompany.State,
		&i.CrmCompany.PostalCode,
		&i.CrmCompany.Country,
		&i.CrmCompany.PhoneNumber,
		&i.CrmCompany.Industry,
		&i.CrmCompany.Website,
		&i.CrmCompany.AnnualRevenue,
		&i.CrmCompany.OwnerID,
		&i.CrmCompany.CreatedAt,
		&i.CrmCompany.UpdatedAt,
		&i.WmsWarehouse.ID,
		&i.WmsWarehouse.Name,
		&i.WmsWarehouse.Address,
		&i.WmsWarehouse.City,
		&i.WmsWarehouse.State,
		&i.WmsWarehouse.PostalCode,
		&i.WmsWarehouse.Country,
		&i.WmsWarehouse.Timezone,
		&i.WmsWarehouse.ContactPerson,
		&i.WmsWarehouse.ContactEmail,
		&i.WmsWarehouse.ContactPhone,
		&i.WmsWarehouse.IsActive,
		&i.WmsWarehouse.CreatedAt,
		&i.WmsWarehouse.UpdatedAt,
		&i.WmsLocation.ID,
		&i.WmsLocation.WarehouseID,
		&i.WmsLocation.ParentLocationID,
		&i.WmsLocation.Name,
		&i.WmsLocation.Barcode,
		&i.WmsLocation.Type,
		&i.WmsLocation.Level,
		&i.WmsLocation.Path,
		&i.WmsLocation.MaxWeight,
		&i.WmsLocation.MaxVolume,
		&i.WmsLocation.MaxPallets,
		&i.WmsLocation.XCoordinate,
		&i.WmsLocation.YCoordinate,
		&i.WmsLocation.ZCoordinate,
		&i.WmsLocation.IsPickable,
		&i.WmsLocation.IsReceivable,
		&i.WmsLocation.TemperatureControlled,
		&i.WmsLocation.HazmatApproved,
		&i.WmsLocation.IsActive,
		&i.WmsLocation.CreatedAt,
		&i.WmsLocation.UpdatedAt,
	)
	return i, err
}

const wmsInsertPutawayRule = `-- name: WmsInsertPutawayRule :one
insert into "wms"."putaway_rules"(product_id, client_id, warehouse_id, preferred_location_id, location_type, priority, min_quantity, max_quantity, weight_threshold, volume_threshold, requires_temperature_control, requires_hazmat_approval, is_active)
  values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
returning
  id, product_id, client_id, warehouse_id, preferred_location_id, location_type, priority, min_quantity, max_quantity, weight_threshold, volume_threshold, requires_temperature_control, requires_hazmat_approval, is_active, created_at, updated_at
`

type WmsInsertPutawayRuleParams struct {
	ProductID                  pgtype.UUID
	ClientID                   pgtype.UUID
	WarehouseID                pgtype.UUID
	PreferredLocationID        pgtype.UUID
	LocationType               NullWmsLocationTypeEnum
	Priority                   int32
	MinQuantity                pgtype.Int4
	MaxQuantity                pgtype.Int4
	WeightThreshold            pgtype.Float4
	VolumeThreshold            pgtype.Float4
	RequiresTemperatureControl pgtype.Bool
	RequiresHazmatApproval     pgtype.Bool
	IsActive                   pgtype.Bool
}

func (q *Queries) WmsInsertPutawayRule(ctx context.Context, arg WmsInsertPutawayRuleParams) (WmsPutawayRule, error) {
	row := q.db.QueryRow(ctx, wmsInsertPutawayRule,
		arg.ProductID,
		arg.ClientID,
		arg.WarehouseID,
		arg.PreferredLocationID,
		arg.LocationType,
		arg.Priority,
		arg.MinQuantity,
		arg.MaxQuantity,
		arg.WeightThreshold,
		arg.VolumeThreshold,
		arg.RequiresTemperatureControl,
		arg.RequiresHazmatApproval,
		arg.IsActive,
	)
	var i WmsPutawayRule
	err := row.Scan(
		&i.ID,
		&i.ProductID,
		&i.ClientID,
		&i.WarehouseID,
		&i.PreferredLocationID,
		&i.LocationType,
		&i.Priority,
		&i.MinQuantity,
		&i.MaxQuantity,
		&i.WeightThreshold,
		&i.VolumeThreshold,
		&i.RequiresTemperatureControl,
		&i.RequiresHazmatApproval,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const wmsPaginatePutawayRule = `-- name: WmsPaginatePutawayRule :many
select
  putaway_rules.id, putaway_rules.product_id, putaway_rules.client_id, putaway_rules.warehouse_id, putaway_rules.preferred_location_id, putaway_rules.location_type, putaway_rules.priority, putaway_rules.min_quantity, putaway_rules.max_quantity, putaway_rules.weight_threshold, putaway_rules.volume_threshold, putaway_rules.requires_temperature_control, putaway_rules.requires_hazmat_approval, putaway_rules.is_active, putaway_rules.created_at, putaway_rules.updated_at,
  product.id, product.name, product.sku, product.barcode, product.description, product.cost_price, product.length, product.width, product.height, product.volume, product.weight, product.status, product.supplier_id, product.client_id, product.created_at, product.updated_at,
  client.id, client.name, client.street, client.city, client.state, client.postal_code, client.country, client.phone_number, client.industry, client.website, client.annual_revenue, client.owner_id, client.created_at, client.updated_at,
  warehouse.id, warehouse.name, warehouse.address, warehouse.city, warehouse.state, warehouse.postal_code, warehouse.country, warehouse.timezone, warehouse.contact_person, warehouse.contact_email, warehouse.contact_phone, warehouse.is_active, warehouse.created_at, warehouse.updated_at,
  preferred_location.id, preferred_location.warehouse_id, preferred_location.parent_location_id, preferred_location.name, preferred_location.barcode, preferred_location.type, preferred_location.level, preferred_location.path, preferred_location.max_weight, preferred_location.max_volume, preferred_location.max_pallets, preferred_location.x_coordinate, preferred_location.y_coordinate, preferred_location.z_coordinate, preferred_location.is_pickable, preferred_location.is_receivable, preferred_location.temperature_controlled, preferred_location.hazmat_approved, preferred_location.is_active, preferred_location.created_at, preferred_location.updated_at
from
  "wms"."putaway_rules" as putaway_rules
  inner join "wms"."products" as product on putaway_rules.product_id = product.id
  left join "crm"."companies" as client on putaway_rules.client_id = client.id
  inner join "wms"."warehouses" as warehouse on putaway_rules.warehouse_id = warehouse.id
  left join "wms"."locations" as preferred_location on putaway_rules.preferred_location_id = preferred_location.id
where (product.name ilike $1::text
  or client.name ilike $1::text
  or warehouse.name ilike $1::text
  or preferred_location.name ilike $1::text
  or putaway_rules.location_type::text ilike $1::text
  or $1::text is null)
limit $3::int offset ($2::int - 1) * $3::int
`

type WmsPaginatePutawayRuleParams struct {
	Search  pgtype.Text
	Page    int32
	Perpage int32
}

type WmsPaginatePutawayRuleRow struct {
	WmsPutawayRule WmsPutawayRule
	WmsProduct     WmsProduct
	CrmCompany     CrmCompany
	WmsWarehouse   WmsWarehouse
	WmsLocation    WmsLocation
}

func (q *Queries) WmsPaginatePutawayRule(ctx context.Context, arg WmsPaginatePutawayRuleParams) ([]WmsPaginatePutawayRuleRow, error) {
	rows, err := q.db.Query(ctx, wmsPaginatePutawayRule, arg.Search, arg.Page, arg.Perpage)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsPaginatePutawayRuleRow
	for rows.Next() {
		var i WmsPaginatePutawayRuleRow
		if err := rows.Scan(
			&i.WmsPutawayRule.ID,
			&i.WmsPutawayRule.ProductID,
			&i.WmsPutawayRule.ClientID,
			&i.WmsPutawayRule.WarehouseID,
			&i.WmsPutawayRule.PreferredLocationID,
			&i.WmsPutawayRule.LocationType,
			&i.WmsPutawayRule.Priority,
			&i.WmsPutawayRule.MinQuantity,
			&i.WmsPutawayRule.MaxQuantity,
			&i.WmsPutawayRule.WeightThreshold,
			&i.WmsPutawayRule.VolumeThreshold,
			&i.WmsPutawayRule.RequiresTemperatureControl,
			&i.WmsPutawayRule.RequiresHazmatApproval,
			&i.WmsPutawayRule.IsActive,
			&i.WmsPutawayRule.CreatedAt,
			&i.WmsPutawayRule.UpdatedAt,
			&i.WmsProduct.ID,
			&i.WmsProduct.Name,
			&i.WmsProduct.Sku,
			&i.WmsProduct.Barcode,
			&i.WmsProduct.Description,
			&i.WmsProduct.CostPrice,
			&i.WmsProduct.Length,
			&i.WmsProduct.Width,
			&i.WmsProduct.Height,
			&i.WmsProduct.Volume,
			&i.WmsProduct.Weight,
			&i.WmsProduct.Status,
			&i.WmsProduct.SupplierID,
			&i.WmsProduct.ClientID,
			&i.WmsProduct.CreatedAt,
			&i.WmsProduct.UpdatedAt,
			&i.CrmCompany.ID,
			&i.CrmCompany.Name,
			&i.CrmCompany.Street,
			&i.CrmCompany.City,
			&i.CrmCompany.State,
			&i.CrmCompany.PostalCode,
			&i.CrmCompany.Country,
			&i.CrmCompany.PhoneNumber,
			&i.CrmCompany.Industry,
			&i.CrmCompany.Website,
			&i.CrmCompany.AnnualRevenue,
			&i.CrmCompany.OwnerID,
			&i.CrmCompany.CreatedAt,
			&i.CrmCompany.UpdatedAt,
			&i.WmsWarehouse.ID,
			&i.WmsWarehouse.Name,
			&i.WmsWarehouse.Address,
			&i.WmsWarehouse.City,
			&i.WmsWarehouse.State,
			&i.WmsWarehouse.PostalCode,
			&i.WmsWarehouse.Country,
			&i.WmsWarehouse.Timezone,
			&i.WmsWarehouse.ContactPerson,
			&i.WmsWarehouse.ContactEmail,
			&i.WmsWarehouse.ContactPhone,
			&i.WmsWarehouse.IsActive,
			&i.WmsWarehouse.CreatedAt,
			&i.WmsWarehouse.UpdatedAt,
			&i.WmsLocation.ID,
			&i.WmsLocation.WarehouseID,
			&i.WmsLocation.ParentLocationID,
			&i.WmsLocation.Name,
			&i.WmsLocation.Barcode,
			&i.WmsLocation.Type,
			&i.WmsLocation.Level,
			&i.WmsLocation.Path,
			&i.WmsLocation.MaxWeight,
			&i.WmsLocation.MaxVolume,
			&i.WmsLocation.MaxPallets,
			&i.WmsLocation.XCoordinate,
			&i.WmsLocation.YCoordinate,
			&i.WmsLocation.ZCoordinate,
			&i.WmsLocation.IsPickable,
			&i.WmsLocation.IsReceivable,
			&i.WmsLocation.TemperatureControlled,
			&i.WmsLocation.HazmatApproved,
			&i.WmsLocation.IsActive,
			&i.WmsLocation.CreatedAt,
			&i.WmsLocation.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsRangePutawayRule = `-- name: WmsRangePutawayRule :many
select
  putaway_rules.id, putaway_rules.product_id, putaway_rules.client_id, putaway_rules.warehouse_id, putaway_rules.preferred_location_id, putaway_rules.location_type, putaway_rules.priority, putaway_rules.min_quantity, putaway_rules.max_quantity, putaway_rules.weight_threshold, putaway_rules.volume_threshold, putaway_rules.requires_temperature_control, putaway_rules.requires_hazmat_approval, putaway_rules.is_active, putaway_rules.created_at, putaway_rules.updated_at,
  product.id, product.name, product.sku, product.barcode, product.description, product.cost_price, product.length, product.width, product.height, product.volume, product.weight, product.status, product.supplier_id, product.client_id, product.created_at, product.updated_at,
  client.id, client.name, client.street, client.city, client.state, client.postal_code, client.country, client.phone_number, client.industry, client.website, client.annual_revenue, client.owner_id, client.created_at, client.updated_at,
  warehouse.id, warehouse.name, warehouse.address, warehouse.city, warehouse.state, warehouse.postal_code, warehouse.country, warehouse.timezone, warehouse.contact_person, warehouse.contact_email, warehouse.contact_phone, warehouse.is_active, warehouse.created_at, warehouse.updated_at,
  preferred_location.id, preferred_location.warehouse_id, preferred_location.parent_location_id, preferred_location.name, preferred_location.barcode, preferred_location.type, preferred_location.level, preferred_location.path, preferred_location.max_weight, preferred_location.max_volume, preferred_location.max_pallets, preferred_location.x_coordinate, preferred_location.y_coordinate, preferred_location.z_coordinate, preferred_location.is_pickable, preferred_location.is_receivable, preferred_location.temperature_controlled, preferred_location.hazmat_approved, preferred_location.is_active, preferred_location.created_at, preferred_location.updated_at
from
  "wms"."putaway_rules" as putaway_rules
  inner join "wms"."products" as product on putaway_rules.product_id = product.id
  left join "crm"."companies" as client on putaway_rules.client_id = client.id
  inner join "wms"."warehouses" as warehouse on putaway_rules.warehouse_id = warehouse.id
  left join "wms"."locations" as preferred_location on putaway_rules.preferred_location_id = preferred_location.id
where
  putaway_rules.created_at >= $1::date
  and putaway_rules.created_at <= $2::date
  and (product.name ilike $3::text
    or client.name ilike $3::text
    or warehouse.name ilike $3::text
    or preferred_location.name ilike $3::text
    or putaway_rules.location_type::text ilike $3::text
    or $3::text is null)
`

type WmsRangePutawayRuleParams struct {
	Datefrom pgtype.Date
	Dateto   pgtype.Date
	Search   pgtype.Text
}

type WmsRangePutawayRuleRow struct {
	WmsPutawayRule WmsPutawayRule
	WmsProduct     WmsProduct
	CrmCompany     CrmCompany
	WmsWarehouse   WmsWarehouse
	WmsLocation    WmsLocation
}

func (q *Queries) WmsRangePutawayRule(ctx context.Context, arg WmsRangePutawayRuleParams) ([]WmsRangePutawayRuleRow, error) {
	rows, err := q.db.Query(ctx, wmsRangePutawayRule, arg.Datefrom, arg.Dateto, arg.Search)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []WmsRangePutawayRuleRow
	for rows.Next() {
		var i WmsRangePutawayRuleRow
		if err := rows.Scan(
			&i.WmsPutawayRule.ID,
			&i.WmsPutawayRule.ProductID,
			&i.WmsPutawayRule.ClientID,
			&i.WmsPutawayRule.WarehouseID,
			&i.WmsPutawayRule.PreferredLocationID,
			&i.WmsPutawayRule.LocationType,
			&i.WmsPutawayRule.Priority,
			&i.WmsPutawayRule.MinQuantity,
			&i.WmsPutawayRule.MaxQuantity,
			&i.WmsPutawayRule.WeightThreshold,
			&i.WmsPutawayRule.VolumeThreshold,
			&i.WmsPutawayRule.RequiresTemperatureControl,
			&i.WmsPutawayRule.RequiresHazmatApproval,
			&i.WmsPutawayRule.IsActive,
			&i.WmsPutawayRule.CreatedAt,
			&i.WmsPutawayRule.UpdatedAt,
			&i.WmsProduct.ID,
			&i.WmsProduct.Name,
			&i.WmsProduct.Sku,
			&i.WmsProduct.Barcode,
			&i.WmsProduct.Description,
			&i.WmsProduct.CostPrice,
			&i.WmsProduct.Length,
			&i.WmsProduct.Width,
			&i.WmsProduct.Height,
			&i.WmsProduct.Volume,
			&i.WmsProduct.Weight,
			&i.WmsProduct.Status,
			&i.WmsProduct.SupplierID,
			&i.WmsProduct.ClientID,
			&i.WmsProduct.CreatedAt,
			&i.WmsProduct.UpdatedAt,
			&i.CrmCompany.ID,
			&i.CrmCompany.Name,
			&i.CrmCompany.Street,
			&i.CrmCompany.City,
			&i.CrmCompany.State,
			&i.CrmCompany.PostalCode,
			&i.CrmCompany.Country,
			&i.CrmCompany.PhoneNumber,
			&i.CrmCompany.Industry,
			&i.CrmCompany.Website,
			&i.CrmCompany.AnnualRevenue,
			&i.CrmCompany.OwnerID,
			&i.CrmCompany.CreatedAt,
			&i.CrmCompany.UpdatedAt,
			&i.WmsWarehouse.ID,
			&i.WmsWarehouse.Name,
			&i.WmsWarehouse.Address,
			&i.WmsWarehouse.City,
			&i.WmsWarehouse.State,
			&i.WmsWarehouse.PostalCode,
			&i.WmsWarehouse.Country,
			&i.WmsWarehouse.Timezone,
			&i.WmsWarehouse.ContactPerson,
			&i.WmsWarehouse.ContactEmail,
			&i.WmsWarehouse.ContactPhone,
			&i.WmsWarehouse.IsActive,
			&i.WmsWarehouse.CreatedAt,
			&i.WmsWarehouse.UpdatedAt,
			&i.WmsLocation.ID,
			&i.WmsLocation.WarehouseID,
			&i.WmsLocation.ParentLocationID,
			&i.WmsLocation.Name,
			&i.WmsLocation.Barcode,
			&i.WmsLocation.Type,
			&i.WmsLocation.Level,
			&i.WmsLocation.Path,
			&i.WmsLocation.MaxWeight,
			&i.WmsLocation.MaxVolume,
			&i.WmsLocation.MaxPallets,
			&i.WmsLocation.XCoordinate,
			&i.WmsLocation.YCoordinate,
			&i.WmsLocation.ZCoordinate,
			&i.WmsLocation.IsPickable,
			&i.WmsLocation.IsReceivable,
			&i.WmsLocation.TemperatureControlled,
			&i.WmsLocation.HazmatApproved,
			&i.WmsLocation.IsActive,
			&i.WmsLocation.CreatedAt,
			&i.WmsLocation.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const wmsRemovePutawayRule = `-- name: WmsRemovePutawayRule :exec
delete from "wms"."putaway_rules"
where id = $1::uuid
`

func (q *Queries) WmsRemovePutawayRule(ctx context.Context, id pgtype.UUID) error {
	_, err := q.db.Exec(ctx, wmsRemovePutawayRule, id)
	return err
}

const wmsUpdatePutawayRule = `-- name: WmsUpdatePutawayRule :one
update
  "wms"."putaway_rules"
set
  updated_at = now(),
  product_id = case when $1 is not null then
    $1::uuid
  else
    product_id
  end,
  client_id = case when $2 is not null then
    $2::uuid
  else
    client_id
  end,
  warehouse_id = case when $3 is not null then
    $3::uuid
  else
    warehouse_id
  end,
  preferred_location_id = case when $4 is not null then
    $4::uuid
  else
    preferred_location_id
  end,
  location_type = case when $5 is not null then
    $5::wms.location_type_enum
  else
    location_type
  end,
  priority = case when $6 is not null then
    $6::integer
  else
    priority
  end,
  min_quantity = case when $7 is not null then
    $7::integer
  else
    min_quantity
  end,
  max_quantity = case when $8 is not null then
    $8::integer
  else
    max_quantity
  end,
  weight_threshold = case when $9 is not null then
    $9::real
  else
    weight_threshold
  end,
  volume_threshold = case when $10 is not null then
    $10::real
  else
    volume_threshold
  end,
  requires_temperature_control = case when $11 is not null then
    $11::boolean
  else
    requires_temperature_control
  end,
  requires_hazmat_approval = case when $12 is not null then
    $12::boolean
  else
    requires_hazmat_approval
  end,
  is_active = case when $13 is not null then
    $13::boolean
  else
    is_active
  end
where
  id = $14::uuid
returning
  id, product_id, client_id, warehouse_id, preferred_location_id, location_type, priority, min_quantity, max_quantity, weight_threshold, volume_threshold, requires_temperature_control, requires_hazmat_approval, is_active, created_at, updated_at
`

type WmsUpdatePutawayRuleParams struct {
	ProductID                  pgtype.UUID
	ClientID                   pgtype.UUID
	WarehouseID                pgtype.UUID
	PreferredLocationID        pgtype.UUID
	LocationType               NullWmsLocationTypeEnum
	Priority                   int32
	MinQuantity                pgtype.Int4
	MaxQuantity                pgtype.Int4
	WeightThreshold            pgtype.Float4
	VolumeThreshold            pgtype.Float4
	RequiresTemperatureControl pgtype.Bool
	RequiresHazmatApproval     pgtype.Bool
	IsActive                   pgtype.Bool
	ID                         pgtype.UUID
}

func (q *Queries) WmsUpdatePutawayRule(ctx context.Context, arg WmsUpdatePutawayRuleParams) (WmsPutawayRule, error) {
	row := q.db.QueryRow(ctx, wmsUpdatePutawayRule,
		arg.ProductID,
		arg.ClientID,
		arg.WarehouseID,
		arg.PreferredLocationID,
		arg.LocationType,
		arg.Priority,
		arg.MinQuantity,
		arg.MaxQuantity,
		arg.WeightThreshold,
		arg.VolumeThreshold,
		arg.RequiresTemperatureControl,
		arg.RequiresHazmatApproval,
		arg.IsActive,
		arg.ID,
	)
	var i WmsPutawayRule
	err := row.Scan(
		&i.ID,
		&i.ProductID,
		&i.ClientID,
		&i.WarehouseID,
		&i.PreferredLocationID,
		&i.LocationType,
		&i.Priority,
		&i.MinQuantity,
		&i.MaxQuantity,
		&i.WeightThreshold,
		&i.VolumeThreshold,
		&i.RequiresTemperatureControl,
		&i.RequiresHazmatApproval,
		&i.IsActive,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
