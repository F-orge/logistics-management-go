// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: dms_delivery_tasks.sql

package models

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const dmsAnyDeliveryTask = `-- name: DmsAnyDeliveryTask :many
select
  delivery_tasks.id, delivery_tasks.package_id, delivery_tasks.delivery_route_id, delivery_tasks.route_sequence, delivery_tasks.delivery_address, delivery_tasks.recipient_name, delivery_tasks.recipient_phone, delivery_tasks.delivery_instructions, delivery_tasks.estimated_arrival_time, delivery_tasks.actual_arrival_time, delivery_tasks.delivery_time, delivery_tasks.status, delivery_tasks.failure_reason, delivery_tasks.attempt_count, delivery_tasks.created_at, delivery_tasks.updated_at, delivery_tasks.task_events, delivery_tasks.proof_of_deliveries, delivery_tasks.customer_tracking_links,
  delivery_route.id, delivery_route.driver_id, delivery_route.route_date, delivery_route.status, delivery_route.optimized_route_data, delivery_route.total_distance_km, delivery_route.estimated_duration_minutes, delivery_route.actual_duration_minutes, delivery_route.started_at, delivery_route.completed_at, delivery_route.created_at, delivery_route.updated_at
from
  "dms"."delivery_tasks_view" as delivery_tasks
  inner join "dms"."delivery_routes" as delivery_route on delivery_tasks.delivery_route_id = delivery_route.id
where
  delivery_tasks.id = any ($1::uuid[])
`

type DmsAnyDeliveryTaskRow struct {
	ID                    pgtype.UUID                      `db:"id" json:"id"`
	PackageID             pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID       pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence         int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress       string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName         pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone        pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions  pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime  pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime     pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime          pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status                NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason         NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount          pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
	CreatedAt             pgtype.Timestamp                 `db:"created_at" json:"created_at"`
	UpdatedAt             pgtype.Timestamp                 `db:"updated_at" json:"updated_at"`
	TaskEvents            []DmsTaskEvent                   `db:"task_events" json:"task_events"`
	ProofOfDeliveries     []DmsProofOfDelivery             `db:"proof_of_deliveries" json:"proof_of_deliveries"`
	CustomerTrackingLinks []DmsCustomerTrackingLink        `db:"customer_tracking_links" json:"customer_tracking_links"`
	DmsDeliveryRoute      DmsDeliveryRoute                 `db:"dms_delivery_route" json:"dms_delivery_route"`
}

func (q *Queries) DmsAnyDeliveryTask(ctx context.Context, ids []pgtype.UUID) ([]DmsAnyDeliveryTaskRow, error) {
	rows, err := q.db.Query(ctx, dmsAnyDeliveryTask, ids)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []DmsAnyDeliveryTaskRow
	for rows.Next() {
		var i DmsAnyDeliveryTaskRow
		if err := rows.Scan(
			&i.ID,
			&i.PackageID,
			&i.DeliveryRouteID,
			&i.RouteSequence,
			&i.DeliveryAddress,
			&i.RecipientName,
			&i.RecipientPhone,
			&i.DeliveryInstructions,
			&i.EstimatedArrivalTime,
			&i.ActualArrivalTime,
			&i.DeliveryTime,
			&i.Status,
			&i.FailureReason,
			&i.AttemptCount,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.TaskEvents,
			&i.ProofOfDeliveries,
			&i.CustomerTrackingLinks,
			&i.DmsDeliveryRoute.ID,
			&i.DmsDeliveryRoute.DriverID,
			&i.DmsDeliveryRoute.RouteDate,
			&i.DmsDeliveryRoute.Status,
			&i.DmsDeliveryRoute.OptimizedRouteData,
			&i.DmsDeliveryRoute.TotalDistanceKm,
			&i.DmsDeliveryRoute.EstimatedDurationMinutes,
			&i.DmsDeliveryRoute.ActualDurationMinutes,
			&i.DmsDeliveryRoute.StartedAt,
			&i.DmsDeliveryRoute.CompletedAt,
			&i.DmsDeliveryRoute.CreatedAt,
			&i.DmsDeliveryRoute.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const dmsFindDeliveryTask = `-- name: DmsFindDeliveryTask :one
select
  delivery_tasks.id, delivery_tasks.package_id, delivery_tasks.delivery_route_id, delivery_tasks.route_sequence, delivery_tasks.delivery_address, delivery_tasks.recipient_name, delivery_tasks.recipient_phone, delivery_tasks.delivery_instructions, delivery_tasks.estimated_arrival_time, delivery_tasks.actual_arrival_time, delivery_tasks.delivery_time, delivery_tasks.status, delivery_tasks.failure_reason, delivery_tasks.attempt_count, delivery_tasks.created_at, delivery_tasks.updated_at, delivery_tasks.task_events, delivery_tasks.proof_of_deliveries, delivery_tasks.customer_tracking_links,
  delivery_route.id, delivery_route.driver_id, delivery_route.route_date, delivery_route.status, delivery_route.optimized_route_data, delivery_route.total_distance_km, delivery_route.estimated_duration_minutes, delivery_route.actual_duration_minutes, delivery_route.started_at, delivery_route.completed_at, delivery_route.created_at, delivery_route.updated_at
from
  "dms"."delivery_tasks_view" as delivery_tasks
  inner join "dms"."delivery_routes" as delivery_route on delivery_tasks.delivery_route_id = delivery_route.id
where
  delivery_tasks.id = $1::uuid
`

type DmsFindDeliveryTaskRow struct {
	ID                    pgtype.UUID                      `db:"id" json:"id"`
	PackageID             pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID       pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence         int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress       string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName         pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone        pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions  pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime  pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime     pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime          pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status                NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason         NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount          pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
	CreatedAt             pgtype.Timestamp                 `db:"created_at" json:"created_at"`
	UpdatedAt             pgtype.Timestamp                 `db:"updated_at" json:"updated_at"`
	TaskEvents            []DmsTaskEvent                   `db:"task_events" json:"task_events"`
	ProofOfDeliveries     []DmsProofOfDelivery             `db:"proof_of_deliveries" json:"proof_of_deliveries"`
	CustomerTrackingLinks []DmsCustomerTrackingLink        `db:"customer_tracking_links" json:"customer_tracking_links"`
	DmsDeliveryRoute      DmsDeliveryRoute                 `db:"dms_delivery_route" json:"dms_delivery_route"`
}

func (q *Queries) DmsFindDeliveryTask(ctx context.Context, id pgtype.UUID) (DmsFindDeliveryTaskRow, error) {
	row := q.db.QueryRow(ctx, dmsFindDeliveryTask, id)
	var i DmsFindDeliveryTaskRow
	err := row.Scan(
		&i.ID,
		&i.PackageID,
		&i.DeliveryRouteID,
		&i.RouteSequence,
		&i.DeliveryAddress,
		&i.RecipientName,
		&i.RecipientPhone,
		&i.DeliveryInstructions,
		&i.EstimatedArrivalTime,
		&i.ActualArrivalTime,
		&i.DeliveryTime,
		&i.Status,
		&i.FailureReason,
		&i.AttemptCount,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.TaskEvents,
		&i.ProofOfDeliveries,
		&i.CustomerTrackingLinks,
		&i.DmsDeliveryRoute.ID,
		&i.DmsDeliveryRoute.DriverID,
		&i.DmsDeliveryRoute.RouteDate,
		&i.DmsDeliveryRoute.Status,
		&i.DmsDeliveryRoute.OptimizedRouteData,
		&i.DmsDeliveryRoute.TotalDistanceKm,
		&i.DmsDeliveryRoute.EstimatedDurationMinutes,
		&i.DmsDeliveryRoute.ActualDurationMinutes,
		&i.DmsDeliveryRoute.StartedAt,
		&i.DmsDeliveryRoute.CompletedAt,
		&i.DmsDeliveryRoute.CreatedAt,
		&i.DmsDeliveryRoute.UpdatedAt,
	)
	return i, err
}

const dmsInsertDeliveryTask = `-- name: DmsInsertDeliveryTask :one
insert into "dms"."delivery_tasks"(package_id, delivery_route_id, route_sequence, delivery_address, recipient_name, recipient_phone, delivery_instructions, estimated_arrival_time, actual_arrival_time, delivery_time, status, failure_reason, attempt_count)
  values ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)
returning
  id, package_id, delivery_route_id, route_sequence, delivery_address, recipient_name, recipient_phone, delivery_instructions, estimated_arrival_time, actual_arrival_time, delivery_time, status, failure_reason, attempt_count, created_at, updated_at
`

type DmsInsertDeliveryTaskParams struct {
	PackageID            pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID      pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence        int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress      string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName        pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone       pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime    pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime         pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status               NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason        NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount         pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
}

func (q *Queries) DmsInsertDeliveryTask(ctx context.Context, arg DmsInsertDeliveryTaskParams) (DmsDeliveryTask, error) {
	row := q.db.QueryRow(ctx, dmsInsertDeliveryTask,
		arg.PackageID,
		arg.DeliveryRouteID,
		arg.RouteSequence,
		arg.DeliveryAddress,
		arg.RecipientName,
		arg.RecipientPhone,
		arg.DeliveryInstructions,
		arg.EstimatedArrivalTime,
		arg.ActualArrivalTime,
		arg.DeliveryTime,
		arg.Status,
		arg.FailureReason,
		arg.AttemptCount,
	)
	var i DmsDeliveryTask
	err := row.Scan(
		&i.ID,
		&i.PackageID,
		&i.DeliveryRouteID,
		&i.RouteSequence,
		&i.DeliveryAddress,
		&i.RecipientName,
		&i.RecipientPhone,
		&i.DeliveryInstructions,
		&i.EstimatedArrivalTime,
		&i.ActualArrivalTime,
		&i.DeliveryTime,
		&i.Status,
		&i.FailureReason,
		&i.AttemptCount,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const dmsPaginateDeliveryTask = `-- name: DmsPaginateDeliveryTask :many
select
  delivery_tasks.id, delivery_tasks.package_id, delivery_tasks.delivery_route_id, delivery_tasks.route_sequence, delivery_tasks.delivery_address, delivery_tasks.recipient_name, delivery_tasks.recipient_phone, delivery_tasks.delivery_instructions, delivery_tasks.estimated_arrival_time, delivery_tasks.actual_arrival_time, delivery_tasks.delivery_time, delivery_tasks.status, delivery_tasks.failure_reason, delivery_tasks.attempt_count, delivery_tasks.created_at, delivery_tasks.updated_at, delivery_tasks.task_events, delivery_tasks.proof_of_deliveries, delivery_tasks.customer_tracking_links,
  delivery_route.id, delivery_route.driver_id, delivery_route.route_date, delivery_route.status, delivery_route.optimized_route_data, delivery_route.total_distance_km, delivery_route.estimated_duration_minutes, delivery_route.actual_duration_minutes, delivery_route.started_at, delivery_route.completed_at, delivery_route.created_at, delivery_route.updated_at, delivery_route.delivery_tasks
from
  "dms"."delivery_tasks_view" as delivery_tasks
  inner join "dms"."delivery_routes_view" as delivery_route on delivery_tasks.delivery_route_id = delivery_route.id
  -- Assuming wms.packages is in a different schema and cannot be joined directly for sqlc.embed
where (delivery_tasks.recipient_name ilike $1::text
  or delivery_tasks.delivery_address ilike $1::text
  or delivery_tasks.status::text ilike $1::text
  or delivery_route.status::text ilike $1::text
  or $1::text is null)
limit $3::int offset ($2::int - 1) * $3::int
`

type DmsPaginateDeliveryTaskParams struct {
	Search  pgtype.Text `db:"search" json:"search"`
	Page    int32       `db:"page" json:"page"`
	PerPage int32       `db:"per_page" json:"per_page"`
}

type DmsPaginateDeliveryTaskRow struct {
	ID                    pgtype.UUID                      `db:"id" json:"id"`
	PackageID             pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID       pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence         int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress       string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName         pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone        pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions  pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime  pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime     pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime          pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status                NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason         NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount          pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
	CreatedAt             pgtype.Timestamp                 `db:"created_at" json:"created_at"`
	UpdatedAt             pgtype.Timestamp                 `db:"updated_at" json:"updated_at"`
	TaskEvents            []DmsTaskEvent                   `db:"task_events" json:"task_events"`
	ProofOfDeliveries     []DmsProofOfDelivery             `db:"proof_of_deliveries" json:"proof_of_deliveries"`
	CustomerTrackingLinks []DmsCustomerTrackingLink        `db:"customer_tracking_links" json:"customer_tracking_links"`
	DmsDeliveryRoutesView DmsDeliveryRoutesView            `db:"dms_delivery_routes_view" json:"dms_delivery_routes_view"`
}

func (q *Queries) DmsPaginateDeliveryTask(ctx context.Context, arg DmsPaginateDeliveryTaskParams) ([]DmsPaginateDeliveryTaskRow, error) {
	rows, err := q.db.Query(ctx, dmsPaginateDeliveryTask, arg.Search, arg.Page, arg.PerPage)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []DmsPaginateDeliveryTaskRow
	for rows.Next() {
		var i DmsPaginateDeliveryTaskRow
		if err := rows.Scan(
			&i.ID,
			&i.PackageID,
			&i.DeliveryRouteID,
			&i.RouteSequence,
			&i.DeliveryAddress,
			&i.RecipientName,
			&i.RecipientPhone,
			&i.DeliveryInstructions,
			&i.EstimatedArrivalTime,
			&i.ActualArrivalTime,
			&i.DeliveryTime,
			&i.Status,
			&i.FailureReason,
			&i.AttemptCount,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.TaskEvents,
			&i.ProofOfDeliveries,
			&i.CustomerTrackingLinks,
			&i.DmsDeliveryRoutesView.ID,
			&i.DmsDeliveryRoutesView.DriverID,
			&i.DmsDeliveryRoutesView.RouteDate,
			&i.DmsDeliveryRoutesView.Status,
			&i.DmsDeliveryRoutesView.OptimizedRouteData,
			&i.DmsDeliveryRoutesView.TotalDistanceKm,
			&i.DmsDeliveryRoutesView.EstimatedDurationMinutes,
			&i.DmsDeliveryRoutesView.ActualDurationMinutes,
			&i.DmsDeliveryRoutesView.StartedAt,
			&i.DmsDeliveryRoutesView.CompletedAt,
			&i.DmsDeliveryRoutesView.CreatedAt,
			&i.DmsDeliveryRoutesView.UpdatedAt,
			&i.DmsDeliveryRoutesView.DeliveryTasks,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const dmsPaginateDeliveryTaskMetadata = `-- name: DmsPaginateDeliveryTaskMetadata :one
select
  count(*) over () as total_items,
  ceil(count(*) over ()::numeric / NULLIF($1::int, 0)) as total_pages,
  $2::int as page,
  $1::int as per_page
from
  "dms"."delivery_tasks_view" as delivery_tasks
`

type DmsPaginateDeliveryTaskMetadataParams struct {
	PerPage int32 `db:"per_page" json:"per_page"`
	Page    int32 `db:"page" json:"page"`
}

type DmsPaginateDeliveryTaskMetadataRow struct {
	TotalItems int64   `db:"total_items" json:"total_items"`
	TotalPages float64 `db:"total_pages" json:"total_pages"`
	Page       int32   `db:"page" json:"page"`
	PerPage    int32   `db:"per_page" json:"per_page"`
}

func (q *Queries) DmsPaginateDeliveryTaskMetadata(ctx context.Context, arg DmsPaginateDeliveryTaskMetadataParams) (DmsPaginateDeliveryTaskMetadataRow, error) {
	row := q.db.QueryRow(ctx, dmsPaginateDeliveryTaskMetadata, arg.PerPage, arg.Page)
	var i DmsPaginateDeliveryTaskMetadataRow
	err := row.Scan(
		&i.TotalItems,
		&i.TotalPages,
		&i.Page,
		&i.PerPage,
	)
	return i, err
}

const dmsRangeDeliveryTask = `-- name: DmsRangeDeliveryTask :many
select
  delivery_tasks.id, delivery_tasks.package_id, delivery_tasks.delivery_route_id, delivery_tasks.route_sequence, delivery_tasks.delivery_address, delivery_tasks.recipient_name, delivery_tasks.recipient_phone, delivery_tasks.delivery_instructions, delivery_tasks.estimated_arrival_time, delivery_tasks.actual_arrival_time, delivery_tasks.delivery_time, delivery_tasks.status, delivery_tasks.failure_reason, delivery_tasks.attempt_count, delivery_tasks.created_at, delivery_tasks.updated_at, delivery_tasks.task_events, delivery_tasks.proof_of_deliveries, delivery_tasks.customer_tracking_links,
  delivery_route.id, delivery_route.driver_id, delivery_route.route_date, delivery_route.status, delivery_route.optimized_route_data, delivery_route.total_distance_km, delivery_route.estimated_duration_minutes, delivery_route.actual_duration_minutes, delivery_route.started_at, delivery_route.completed_at, delivery_route.created_at, delivery_route.updated_at
from
  "dms"."delivery_tasks_view" as delivery_tasks
  inner join "dms"."delivery_routes" as delivery_route on delivery_tasks.delivery_route_id = delivery_route.id
where
  delivery_tasks.created_at >= $1::date
  and delivery_tasks.created_at <= $2::date
  and (delivery_tasks.recipient_name ilike $3::text
    or delivery_tasks.delivery_address ilike $3::text
    or delivery_tasks.status::text ilike $3::text
    or delivery_route.status::text ilike $3::text
    or $3::text is null)
`

type DmsRangeDeliveryTaskParams struct {
	Datefrom pgtype.Date `db:"datefrom" json:"datefrom"`
	Dateto   pgtype.Date `db:"dateto" json:"dateto"`
	Search   pgtype.Text `db:"search" json:"search"`
}

type DmsRangeDeliveryTaskRow struct {
	ID                    pgtype.UUID                      `db:"id" json:"id"`
	PackageID             pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID       pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence         int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress       string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName         pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone        pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions  pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime  pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime     pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime          pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status                NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason         NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount          pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
	CreatedAt             pgtype.Timestamp                 `db:"created_at" json:"created_at"`
	UpdatedAt             pgtype.Timestamp                 `db:"updated_at" json:"updated_at"`
	TaskEvents            []DmsTaskEvent                   `db:"task_events" json:"task_events"`
	ProofOfDeliveries     []DmsProofOfDelivery             `db:"proof_of_deliveries" json:"proof_of_deliveries"`
	CustomerTrackingLinks []DmsCustomerTrackingLink        `db:"customer_tracking_links" json:"customer_tracking_links"`
	DmsDeliveryRoute      DmsDeliveryRoute                 `db:"dms_delivery_route" json:"dms_delivery_route"`
}

func (q *Queries) DmsRangeDeliveryTask(ctx context.Context, arg DmsRangeDeliveryTaskParams) ([]DmsRangeDeliveryTaskRow, error) {
	rows, err := q.db.Query(ctx, dmsRangeDeliveryTask, arg.Datefrom, arg.Dateto, arg.Search)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []DmsRangeDeliveryTaskRow
	for rows.Next() {
		var i DmsRangeDeliveryTaskRow
		if err := rows.Scan(
			&i.ID,
			&i.PackageID,
			&i.DeliveryRouteID,
			&i.RouteSequence,
			&i.DeliveryAddress,
			&i.RecipientName,
			&i.RecipientPhone,
			&i.DeliveryInstructions,
			&i.EstimatedArrivalTime,
			&i.ActualArrivalTime,
			&i.DeliveryTime,
			&i.Status,
			&i.FailureReason,
			&i.AttemptCount,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.TaskEvents,
			&i.ProofOfDeliveries,
			&i.CustomerTrackingLinks,
			&i.DmsDeliveryRoute.ID,
			&i.DmsDeliveryRoute.DriverID,
			&i.DmsDeliveryRoute.RouteDate,
			&i.DmsDeliveryRoute.Status,
			&i.DmsDeliveryRoute.OptimizedRouteData,
			&i.DmsDeliveryRoute.TotalDistanceKm,
			&i.DmsDeliveryRoute.EstimatedDurationMinutes,
			&i.DmsDeliveryRoute.ActualDurationMinutes,
			&i.DmsDeliveryRoute.StartedAt,
			&i.DmsDeliveryRoute.CompletedAt,
			&i.DmsDeliveryRoute.CreatedAt,
			&i.DmsDeliveryRoute.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const dmsRemoveDeliveryTask = `-- name: DmsRemoveDeliveryTask :exec
delete from "dms"."delivery_tasks"
where id = $1::uuid
`

func (q *Queries) DmsRemoveDeliveryTask(ctx context.Context, id pgtype.UUID) error {
	_, err := q.db.Exec(ctx, dmsRemoveDeliveryTask, id)
	return err
}

const dmsUpdateDeliveryTask = `-- name: DmsUpdateDeliveryTask :one
update
  "dms"."delivery_tasks"
set
  updated_at = now(),
  package_id = case when $1 is not null then
    $1::uuid
  else
    package_id
  end,
  delivery_route_id = case when $2 is not null then
    $2::uuid
  else
    delivery_route_id
  end,
  route_sequence = case when $3 is not null then
    $3::integer
  else
    route_sequence
  end,
  delivery_address = case when $4 is not null then
    $4::text
  else
    delivery_address
  end,
  recipient_name = case when $5 is not null then
    $5::varchar
  else
    recipient_name
  end,
  recipient_phone = case when $6 is not null then
    $6::varchar
  else
    recipient_phone
  end,
  delivery_instructions = case when $7 is not null then
    $7::text
  else
    delivery_instructions
  end,
  estimated_arrival_time = case when $8 is not null then
    $8::timestamp
  else
    estimated_arrival_time
  end,
  actual_arrival_time = case when $9 is not null then
    $9::timestamp
  else
    actual_arrival_time
  end,
  delivery_time = case when $10 is not null then
    $10::timestamp
  else
    delivery_time
  end,
  status = case when $11 is not null then
    $11::dms.delivery_task_status_enum
  else
    status
  end,
  failure_reason = case when $12 is not null then
    $12::dms.delivery_failure_reason_enum
  else
    failure_reason
  end,
  attempt_count = case when $13 is not null then
    $13::integer
  else
    attempt_count
  end
where
  id = $14::uuid
returning
  id, package_id, delivery_route_id, route_sequence, delivery_address, recipient_name, recipient_phone, delivery_instructions, estimated_arrival_time, actual_arrival_time, delivery_time, status, failure_reason, attempt_count, created_at, updated_at
`

type DmsUpdateDeliveryTaskParams struct {
	PackageID            pgtype.UUID                      `db:"package_id" json:"package_id"`
	DeliveryRouteID      pgtype.UUID                      `db:"delivery_route_id" json:"delivery_route_id"`
	RouteSequence        int32                            `db:"route_sequence" json:"route_sequence"`
	DeliveryAddress      string                           `db:"delivery_address" json:"delivery_address"`
	RecipientName        pgtype.Text                      `db:"recipient_name" json:"recipient_name"`
	RecipientPhone       pgtype.Text                      `db:"recipient_phone" json:"recipient_phone"`
	DeliveryInstructions pgtype.Text                      `db:"delivery_instructions" json:"delivery_instructions"`
	EstimatedArrivalTime pgtype.Timestamp                 `db:"estimated_arrival_time" json:"estimated_arrival_time"`
	ActualArrivalTime    pgtype.Timestamp                 `db:"actual_arrival_time" json:"actual_arrival_time"`
	DeliveryTime         pgtype.Timestamp                 `db:"delivery_time" json:"delivery_time"`
	Status               NullDmsDeliveryTaskStatusEnum    `db:"status" json:"status"`
	FailureReason        NullDmsDeliveryFailureReasonEnum `db:"failure_reason" json:"failure_reason"`
	AttemptCount         pgtype.Int4                      `db:"attempt_count" json:"attempt_count"`
	ID                   pgtype.UUID                      `db:"id" json:"id"`
}

func (q *Queries) DmsUpdateDeliveryTask(ctx context.Context, arg DmsUpdateDeliveryTaskParams) (DmsDeliveryTask, error) {
	row := q.db.QueryRow(ctx, dmsUpdateDeliveryTask,
		arg.PackageID,
		arg.DeliveryRouteID,
		arg.RouteSequence,
		arg.DeliveryAddress,
		arg.RecipientName,
		arg.RecipientPhone,
		arg.DeliveryInstructions,
		arg.EstimatedArrivalTime,
		arg.ActualArrivalTime,
		arg.DeliveryTime,
		arg.Status,
		arg.FailureReason,
		arg.AttemptCount,
		arg.ID,
	)
	var i DmsDeliveryTask
	err := row.Scan(
		&i.ID,
		&i.PackageID,
		&i.DeliveryRouteID,
		&i.RouteSequence,
		&i.DeliveryAddress,
		&i.RecipientName,
		&i.RecipientPhone,
		&i.DeliveryInstructions,
		&i.EstimatedArrivalTime,
		&i.ActualArrivalTime,
		&i.DeliveryTime,
		&i.Status,
		&i.FailureReason,
		&i.AttemptCount,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}
